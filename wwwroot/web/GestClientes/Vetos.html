<div v-if="mode == 0" style="padding: 1em">
    <div class="pure-u-1-24 pure-u-md-1-24"></div>
    <div class="pure-u-22-24 pure-u-md-22-24 menuCard">
        <div class='pure-u-1-1 pure-u-md-1-1 formDivision' style="font-size: 1.5em; margin-bottom: 4px;">
            Clientes Vetados
        </div>
        <div class="searchBox">
            <div class="pure-g">
                <div class="pure-u-1-1 pure-u-md-1-3">
                    <input type="text" placeholder="Ingrese numero de documento o nombre"
                        v-model="filtros.vetos['nombre_id']" maxlength="50" />
                </div>
                <div class="pure-u-1-1 pure-u-md-2-24">
                    <div class="imgGraybutton" @click="onClear('vetos')">
                        <img src="./img/ico/eraser.png" />
                    </div>
                </div>
                <div class="pure-u-1-1 pure-u-md-4-24">
                    <select v-model="filtros.vetos['vigente']">
                        <option value="">[Ver todos]</option>
                        <option :value="'0'">Solicitados</option>
                        <option :value="'1'">Vigentes</option>
                    </select>
                </div>
                <div class="pure-u-1-1 pure-u-md-5-24"></div>
                <div class="pure-u-1-1 pure-u-md-5-24">
                    <button style="display: block; margin-left: auto;" @click="openModal">
                        Solicitar veto
                    </button>
                </div>
            </div>
        </div>
        <div class="main-content">
            <table class="dataTable" style="font-size: 15px;">
                <thead>
                    <tr>
                        <th style="width: 90px;">Fecha</th>
                        <th style="width: 10%;">Documento</th>
                        <th style="width: 18%;">Nombre</th>
                        <th style="width: 14%;">Email</th>
                        <th style="width: 10%;">Teléfono</th>
                        <th style="width: 16%;">Motivo</th>
                        <th style="width: 12%;">Vetado por</th>
                        <th style="width: 60px;" v-if="showAprobar">Validar</th>
                        <th style="width: 69px;">Eliminar</th>
                    </tr>
                </thead>
                <tbody>
                    <tr v-for="v in getFilteredList('vetos')">
                        <td>{{v.fecha}}</td>
                        <td>{{v.numero_documento}}</td>
                        <td>{{v.nombre}}</td>
                        <td>{{v.email}}</td>
                        <td>{{v.telefono}}</td>
                        <td>{{v.motivo}}</td>
                        <td>{{v.vetado_por}}</td>
                        <td style="text-align: center;" v-if="showAprobar">
                            <span class="delete" style="color: #00b300" v-if="v.vigente == '0'"
                                @click.stop.prevent="reqOperation(`El cliente <b>${v.nombre}</b> quedará vetado.`, onApprove, null, v)">
                                ✔
                            </span>
                        </td>
                        <td style="text-align: center;">
                            <span class="delete"
                                @click.stop.prevent="reqOperation(`Se le quitará el veto al cliente <b>${v.nombre}</b>.`, onDelete, null, v)">
                                ✖
                            </span>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<div class="cal-modal-overlay" id="modalOverlay" @click.stop.prevent="closeModal">
    <div class="modal-container pure-g" style="min-width: 50vw; max-width: 50vw; position: relative;">
        <img src="../../img/ico/svg/cerrar-transparente.svg" @click="closeModal" class="modal-cerrar events">
        <div class="pure-u-1-1">
            <h2 style="text-align: center; margin-bottom: 1rem;">
                Solicitud Nuevo Veto
            </h2>
        </div>
        <div class="modal-scroll" style="width: 100%; min-height: 20rem">
            <div class="formInputStandard pure-u-1-1 pure-u-md-12-24">
                <label>Número de Documento</label>
                <div style="display: flex;">
                    <div class="pure-u-1-1 pure-u-md-22-2">
                        <input type="text" v-model="searchCli" maxlength="50"
                            @input="validarNumero(null, 'searchCli'); cliente = {}; searched = false;" />
                    </div>
                    <div class="pure-u-1-1 pure-u-md-2-24">
                        <div class="imgGraybutton" @click="getCliente">
                            <img src="./img/ico/svg/search.svg" />
                        </div>
                    </div>
                </div>
            </div>
            <div class="pure-u-1-1 pure-u-md-1-4"></div>
            <div class="pure-u-1-1 pure-u-md-1-4 formInputStandard">
                <span>Asignar a:</span>
                <select v-model="cliente.asignado" :disabled="!searched">
                    <option value="">[Seleccionar]</option>
                    <option :value="d.id_usuario" v-for="d in directores">{{d.nombres}}</option>
                </select>
            </div>

            <div v-if="searched && !cliente.id_cliente">
                <div class="pure-u-1-2 pure-u-md-1-2 formInputStandard">
                    <label>Nombres*</label>
                    <input type="text" v-model="cliente.nombres" @input="validarTexto(cliente, 'nombres')">
                </div>
                <div class="pure-u-1-2 pure-u-md-1-4 formInputStandard">
                    <label>Primer Apellido</label>
                    <input type="text" v-model="cliente.apellido1" @input="validarTexto(cliente, 'apellido1')">
                </div>
                <div class="pure-u-1-2 pure-u-md-1-4 formInputStandard">
                    <label>Segundo Apellido</label>
                    <input type="text" v-model="cliente.apellido2" @input="validarTexto(cliente, 'apellido2')">
                </div>
                <div class="pure-u-1-2 pure-u-md-1-4 formInputStandard">
                    <label>Email 1</label>
                    <input type="text" v-model="cliente.email1" v-bind:class="{'errorInput': !isEmail(cliente.email1)}">
                </div>
                <div class="pure-u-1-2 pure-u-md-1-4 formInputStandard">
                    <label>Email 2</label>
                    <input type="text" v-model="cliente.email2" v-bind:class="{'errorInput': !isEmail(cliente.email2)}">
                </div>
                <div class="pure-u-1-2 pure-u-md-1-4 formInputStandard">
                    <label>Teléfono 1</label>
                    <input type="text" v-model="cliente.telefono1" @input="validarNumero(cliente, 'telefono1')">
                </div>
                <div class="pure-u-1-2 pure-u-md-1-4 formInputStandard">
                    <label>Teléfono 2</label>
                    <input type="text" v-model="cliente.telefono2" @input="validarNumero(cliente, 'telefono2')">
                </div>
            </div>
            <div v-else style="color: #444;">
                <div class="pure-u-1-2 pure-u-md-1-2 formInputStandard">
                    <label>Nombres*</label>
                    <input type="text" readonly disabled :value="cliente.nombres">
                </div>
                <div class="pure-u-1-2 pure-u-md-1-4 formInputStandard">
                    <label>Primer Apellido</label>
                    <input type="text" readonly disabled :value="cliente.apellido1">
                </div>
                <div class="pure-u-1-2 pure-u-md-1-4 formInputStandard">
                    <label>Segundo Apellido</label>
                    <input type="text" readonly disabled :value="cliente.apellido2">
                </div>
                <div class="pure-u-1-2 pure-u-md-1-4 formInputStandard">
                    <label>Email 1</label>
                    <input type="text" readonly disabled :value="cliente.email1">
                </div>
                <div class="pure-u-1-2 pure-u-md-1-4 formInputStandard">
                    <label>Email 2</label>
                    <input type="text" readonly disabled :value="cliente.email2">
                </div>
                <div class="pure-u-1-2 pure-u-md-1-4 formInputStandard">
                    <label>Teléfono 1</label>
                    <input type="text" readonly disabled :value="cliente.telefono1">
                </div>
                <div class="pure-u-1-2 pure-u-md-1-4 formInputStandard">
                    <label>Teléfono 2</label>
                    <input type="text" readonly disabled :value="cliente.telefono2">
                </div>
            </div>

            <div class="pure-u-1-1 formInputStandard">
                <label>Motivo</label>
                <textarea rows="5" v-model="cliente.motivo" style="resize: none; height: auto;">
                    </textarea>
            </div>

        </div>
        <div class="pure-u-2-5"></div>
        <div class="pure-u-1-5" style="text-align: center;">
            <button @click="onRequest">Solicitar</button>
        </div>
    </div>
</div>