<div v-if="mode == 0" style="padding: 1em">
    <div class="pure-u-1-24 pure-u-md-1-24"></div>
    <div class="pure-u-22-24 pure-u-md-22-24 menuCard">

        <div class="pure-u-1-1 pure-u-md-1-1 formDivision right-button">
            <span style="font-size: 1.5em;">Desistimientos En Proceso </span>
            <div style="min-width: 150px;">
                <button @click="setMode(1)">Nuevo Desistimiento</button>
            </div>
        </div>
        <div class="searchBox" style="padding: .5rem 0;">
            <div class="pure-g">
                <div class="pure-u-1-1 pure-u-md-1-8 formInputStandard">
                    <input type="text" placeholder="Radicado" maxlength="50"
                        v-model="filtros.desistimientos['radicado']" />
                </div>
                <div class="pure-u-1-1 pure-u-md-1-8 formInputStandard">
                    <input type="text" placeholder="ID Venta" maxlength="50"
                        v-model="filtros.desistimientos['id_venta']" />
                </div>
                <div class="pure-u-1-1 pure-u-md-1-8 formInputStandard">
                    <input type="text" placeholder="Doc. Comprador" maxlength="50"
                        v-model="filtros.desistimientos['numero_documento']" />
                </div>
                <div class="pure-u-1-1 pure-u-md-1-8 formInputStandard">
                    <input type="text" placeholder="Nombre" maxlength="50"
                        v-model="filtros.desistimientos['nombre_cliente']" />
                </div>
                <div class="pure-u-1-1 pure-u-md-1-8 formInputStandard">
                    <input type="text" placeholder="Proyecto" maxlength="50"
                        v-model="filtros.desistimientos['proyecto']" />
                </div>
                <div class="pure-u-1-1 pure-u-md-1-8 formInputStandard">
                    <input type="text" placeholder="Agrupaci√≥n" maxlength="50"
                        v-model="filtros.desistimientos['unidad']" />
                </div>
                <div class="pure-u-1-1 pure-u-md-1-8 formInputStandard">
                    <input type="text" placeholder="Asesor" maxlength="50" v-model="filtros.desistimientos['asesor']" />
                </div>
                <div class="pure-u-1-1 pure-u-md-1-8 formInputStandard">
                    <input type="text" placeholder="Estado" maxlength="50" v-model="filtros.desistimientos['estado']" />
                </div>
            </div>
        </div>
        <div class="main-content">
            <table class="dataTable" style="font-size: 15px;">
                <thead>
                    <tr>
                        <th style="width: 8%;">Radicado</th>
                        <th style="width: 8%;">ID Venta</th>
                        <th style="width: 10%;">Doc Comprador</th>
                        <th style="width: 12%;">Nombre</th>
                        <th style="width: 12%;">Proyecto</th>
                        <th style="width: 6%;">Torre</th>
                        <th style="width: 12%;">Agrupaci√≥n/Und</th>
                        <th style="width: 12%;">Asesor</th>
                        <th style="width: 10%;">Fecha</th>
                        <th style="width: 10%;">Estado</th>
                    </tr>
                </thead>
                <tbody>
                    <tr v-for="d in getFilteredList('desistimientos')" @dblclick="onSelectDes(d)">
                        <td>{{d.radicado}}</td>
                        <td>{{d.id_venta}}</td>
                        <td>{{d.numero_documento}}</td>
                        <td @mouseenter="tooltipVisibleL = true; tooltipMsg = d.nombre_cliente;"
                            @mouseleave="tooltipVisibleL = false;" @mousemove="updateCursor">
                            {{d.nombre_cliente}}
                        </td>
                        <td>{{d.proyecto}}</td>
                        <td>{{d.torre}}</td>
                        <td>{{d.unidad}}</td>
                        <td @mouseenter="tooltipVisibleR = true; tooltipMsg = d.asesor;"
                            @mouseleave="tooltipVisibleR = false;" @mousemove="updateCursorRight">
                            {{d.asesor}}
                        </td>
                        <td>{{formatDatetime(d.created_on, 'bdate')}}</td>
                        <td @mouseenter="tooltipVisibleR = true; tooltipMsg = d.estado;"
                            @mouseleave="tooltipVisibleR = false;" @mousemove="updateCursorRight">
                            {{d.estado}}
                        </td>
                    </tr>
                </tbody>
            </table>
            <div v-if="tooltipVisibleR && tooltipMsg" class="cursor-tooltip" v-html="tooltipMsg"
                :style="{ top: tooltipY + 'px', right: tooltipX + 'px' }">
            </div>
            <div v-if="tooltipVisibleL && tooltipMsg" class="cursor-tooltip" v-html="tooltipMsg"
                :style="{ top: tooltipY + 'px', left: tooltipX + 'px' }">
            </div>
        </div>
    </div>
</div>

<div v-if="mode == 1" style="padding: 1em">
    <div class="pure-u-1-24 pure-u-md-1-24"></div>
    <div class="pure-u-22-24 pure-u-md-22-24 menuCard">
        <div class='pure-u-1-1 pure-u-md-1-1 formDivision' style="font-size: 1.5em; margin-bottom: 4px;">
            Nuevo Desistimiento
        </div>
        <div class="pure-u-1-4 formInputStandard">
            <label>ID Venta</label>
            <input type="text" v-model="searchID" @input="searchDoc = null">
        </div>
        <div class="pure-u-1-4 formInputStandard">
            <label>N√∫mero Documento</label>
            <input type="text" v-model="searchDoc" @input="searchID = null">
        </div>
        <div class="pure-u-1-4 formInputStandard" style="text-align: left; margin-top: 1.2rem;">
            <button @click="onFind">Buscar</button>
        </div>

        <div class='pure-u-1-1 pure-u-md-1-1 formDivision' style="font-size: 1.5em; margin-bottom: 4px;">
            Informaci√≥n del Cliente
        </div>
        <div class="pure-u-1-2 pure-u-md-1-5">
            <div class="formInputStandard">
                <label>Nombre</label>
                <input type="text" :value="cliente.nombres" readonly>
            </div>
        </div>
        <div class="pure-u-1-2 pure-u-md-1-5">
            <div class="formInputStandard">
                <label>Apellido 1</label>
                <input type="text" :value="cliente.apellido1" readonly>
            </div>
        </div>
        <div class="pure-u-1-2 pure-u-md-1-5">
            <div class="formInputStandard">
                <label>Apellido 2</label>
                <input type="text" :value="cliente.apellido2" readonly>
            </div>
        </div>
        <div class="pure-u-1-2 pure-u-md-1-5">
            <div class="formInputStandard">
                <label>N√∫mero Documento</label>
                <input type="text" :value="cliente.numero_documento" readonly>
            </div>
        </div>

        <div v-if="cliente && cliente.id_cliente">
            <div class='pure-u-1-1 pure-u-md-1-1 formDivision' style="font-size: 1.5em; margin-bottom: 4px;">
                Ventas
            </div>
            <div style="height: calc(100vh - 25rem); overflow-y: auto;">
                <table class="dataTable" style="table-layout: auto; font-size: 15px;">
                    <thead>
                        <tr>
                            <th style="width: 10%;">Radicado</th>
                            <th style="width: 10%;">ID Venta</th>
                            <th style="width: 14%;">Proyecto</th>
                            <th style="width: 8%;">Torre</th>
                            <th style="width: 12%;">Agrupaci√≥n/Und</th>
                            <th style="width: 12%;">Estado</th>
                            <th style="width: 12%;">Fecha</th>
                            <th style="width: 14%;">Asesor</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr v-for="v in cliVentas" @dblclick="onSelectVenta(v)">
                            <td>{{v.radicado}}</td>
                            <td>{{v.id_venta}}</td>
                            <td>{{v.proyecto}}</td>
                            <td>{{v.torre}}</td>
                            <td>{{v.unidad}}</td>
                            <td>{{v.estado}}</td>
                            <td>{{v.created_on}}</td>
                            <td>{{v.asesor}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>


<div v-if="mode == 2" style="padding: 1em">
    <div class="pure-u-1-24 pure-u-md-1-24"></div>
    <div class="pure-u-22-24 pure-u-md-22-24 menuCard">
        <div class='pure-u-1-1 pure-u-md-1-1 formDivision'
            style="font-size: 1.5em; margin-bottom: 4px; max-height: 2rem; overflow: hidden;">
            Cliente {{cliente.nombre_cliente}}; #{{desistimiento.radicado}}; {{desistimiento.unidad}}
        </div>

        <div style="height: calc(100vh - 16rem); overflow-y: auto;">
            <div class="pure-u-1-4 formInputStandard">
                <label>ID Venta</label>
                <input type="text" :value="desistimiento.id_venta" readonly>
            </div>
            <div class="pure-u-1-4 formInputStandard">
                <label>N√∫mero Documento</label>
                <input type="text" :value="cliente.numero_documento" readonly>
            </div>

            <div class='formDivision deployable' @click="showInfo = !showInfo">
                <span>Radicaci√≥n SINCO #{{desistimiento.radicado}}</span>
                <span class="arrow" v-bind:class="{'expanded': showInfo}">&lt;</span>
            </div>
            <div v-show="showInfo" style="padding: .5rem;">
                <div class="pure-u-1-5 formInputStandard">
                    <label># Radicado:</label>
                    <input type="text" v-model="f_radicado" @input="validarNumero($event, true)">
                </div>
                <div class="pure-u-1-5 formInputStandard">
                    <label>Fecha Creaci√≥n:</label>
                    <input type="datetime-local" :value="desistimiento.created_on" readonly>
                </div>
                <div class="pure-u-1-5 formInputStandard">
                    <label>Incumplimientos:</label>
                    <input type="text" v-model="f_cant_incumplida" @input="validarNumero($event, true)">
                </div>
                <div class="pure-u-1-5 formInputStandard">
                    <label>F. Resoluci√≥n Sinco:</label>
                    <input type="date" v-model="desistimiento.fecha_resolucion">
                </div>
                <div class="pure-u-1-5 formInputStandard">
                    <label>Estado Actual:</label>
                    <select :value="desistimiento.id_estado" disabled>
                        <option value="">[Seleccionar]</option>
                        <option v-for="e in estados" :value="e.id_estado">{{e.nombre}}</option>
                    </select>
                </div>
            </div>

            <div class='formDivision deployable' @click="showDatamart = !showDatamart">
                <span>Valores de la operaci√≥n en Datamart</span>
                <span class="arrow" v-bind:class="{'expanded': showDatamart}">&lt;</span>
            </div>
            <div v-show="showDatamart" style="padding: .5rem;">
                <table class="dataTable">
                    <thead>
                        <tr>
                            <th>Fecha FPC</th>
                            <th>FEC Program.</th>
                            <th>Valor Venta Neto</th>
                            <th>Valor Abonado</th>
                            <th>A Capital</th>
                            <th>A Intereses</th>
                            <th>Condonaci√≥n</th>
                            <th>Imp. Reformas</th>
                        </tr>
                    </thead>
                    <tbody class="editTable">
                        <tr>
                            <td>
                                <input type="date" v-model="desistimiento.fecha_fpc">
                            </td>
                            <td>
                                <input type="date" v-model="desistimiento.fecha_program">
                            </td>
                            <td>
                                <input type="text" v-model="f_v_venta_neto" @input="validarNumero($event, true)">
                            </td>
                            <td>
                                <input type="text" :value="f_v_abonado" readonly>
                            </td>
                            <td>
                                <input type="text" v-model="f_a_capital" @input="validarNumero($event, true)">
                            </td>
                            <td>
                                <input type="text" v-model="f_a_intereses" @input="validarNumero($event, true)">
                            </td>
                            <td>
                                <input type="text" v-model="f_condonacion" @input="validarNumero($event, true)">
                            </td>
                            <td>
                                <input type="text" v-model="f_imp_reformas" @input="validarNumero($event, true)">
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class='formDivision deployable' @click="showGestion = !showGestion">
                <span>Gesti√≥n</span>
                <span class="arrow" v-bind:class="{'expanded': showGestion}">&lt;</span>
            </div>
            <div v-show="showGestion" style="padding: .5rem;">
                <div class="pure-u-1-2 formInputStandard">
                    <label>Categor√≠a Desistimiento:</label>
                    <select v-model="desistimiento.id_categoria">
                        <option value="">[Seleccionar]</option>
                        <option v-for="c in categorias" :value="c.id_categoria">
                            {{c.categoria}}
                        </option>
                    </select>
                </div>
                <div class="pure-u-1-4 formInputStandard">
                    <label>Fiduciaria:</label>
                    <select v-model="desistimiento.id_fiduciaria">
                        <option value="">[Seleccionar]</option>
                        <option v-for="f in fiduciarias" :value="f.id_fiduciaria">
                            {{f.fiduciaria}}
                        </option>
                    </select>
                </div>
                <div class="pure-u-1-4 formInputStandard">
                    <label>Etapa Proyecto:</label>
                    <select v-model="desistimiento.etapa">
                        <option value="">[Seleccionar]</option>
                        <option value="INMOBILIARIO">INMOBILIARIO</option>
                        <option value="PREVENTA">PREVENTA</option>
                    </select>
                </div>

                <div class="pure-u-1-4 formInputStandard">
                    <label>Aplica Penalidad:</label>
                    <select v-model="desistimiento.id_penalidad">
                        <option value="">[Seleccionar]</option>
                        <option v-for="p in penalidades" :value="p.id_penalidad">
                            {{p.penalidad}}
                        </option>
                    </select>
                </div>
                <div class="pure-u-1-4">
                    <div class="formInputStandard" v-if="getCampoPenalidad()">
                        <label>{{getCampoPenalidad()}}:</label>
                        <input type="text" v-model="f_campo" @input="validarNumero">
                    </div>
                </div>
                <div class="pure-u-1-2"></div>

                <div class="pure-u-1-4 formInputStandard">
                    <label>Inter√©s Generado:</label>
                    <input type="text" v-model="f_interes" @input="validarNumero">
                </div>
                <div class="pure-u-1-4 formInputStandard">
                    <label>Gastos Administrativos:</label>
                    <input type="text" v-model="f_gasto" @input="validarNumero">
                </div>
                <div class="pure-u-1-4 formInputStandard">
                    <label>Otro descuento devoluci√≥n:</label>
                    <input type="text" v-model="f_descuento" @input="validarNumero">
                </div>

            </div>

            <div class='formDivision deployable' @click="showLiq = !showLiq">
                <span>Liquidaci√≥n</span>
                <span class="arrow" v-bind:class="{'expanded': showLiq}">&lt;</span>
            </div>
            <div v-show="showLiq" style="padding: .5rem;">
                <table class="dataTable">
                    <thead>
                        <tr>
                            <th>% PNL PCV</th>
                            <th>% PNL Aplicada</th>
                            <th>PNL Aplicada</th>
                            <th>PNL Bruta</th>
                            <th>PNL Neta</th>
                            <th>Devoluci√≥n</th>
                            <th>4xmil</th>
                            <th>L√≠quido</th>
                        </tr>
                    </thead>
                    <tbody class="editTable">
                        <tr>
                            <td>
                                <input type="text" v-model="f_pnl_pcv"
                                    @input="validarNumero($event, false), valMax($event, 100)">
                            </td>
                            <td>
                                <input type="text" v-model="f_pnl_aplicada_ptg"
                                    @input="validarNumero($event, false), valMax($event, 100)">
                            </td>
                            <td>
                                <input type="text" :value="f_pnl_aplicada_val" readonly>
                            </td>
                            <td>
                                <input type="text" :value="f_pnl_bruta" readonly>
                            </td>
                            <td>
                                <input type="text" :value="f_pnl_neta" readonly>
                            </td>
                            <td>
                                <input type="text" :value="f_devolucion" readonly>
                            </td>
                            <td>
                                <input type="text" :value="f_4xmil" readonly>
                            </td>
                            <td>
                                <input type="text" :value="f_liquido" readonly>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>



            <div class='formDivision deployable' @click="showDocs = !showDocs">
                <span>Documentos Adjuntos</span>
                <span class="arrow" v-bind:class="{'expanded': showDocs}">&lt;</span>
            </div>
            <div v-show="showDocs" style="padding: .5rem;">
                <div class="pure-u-1 small-files" @mousemove="updateCursor" @mouseleave="tooltipVisibleL = false"
                    style="position: relative; padding: .5rem;">
                    <label for="file-input" class="preview-container"
                        style="height: 8rem; cursor: pointer; max-height: 100%;" @dragover.prevent="handleDragOver"
                        @drop.prevent="handleDrop" @mouseenter="tooltipVisibleL = true"
                        @mouseleave="tooltipVisibleL = false">
                        <div v-if="previews.length === 0" class="center-absolute ">
                            Arrastra o haz clic para cargar archivos.
                        </div>
                        <div class="image-card" v-for="(item, index) in previews" :key="index" draggable="true"
                            @dragstart="dragStart(index)" @mouseenter="tooltipVisibleL = false"
                            @mouseleave="tooltipVisibleL = true" style="position: relative;">
                            <img :src="item.src" @click.stop.prevent=""
                                @mouseenter="tooltipVisibleL = true; tooltipMsg = item.newName"
                                @mouseleave="tooltipVisibleL = false; tooltipMsg = 'Arrastra o haz clic para cargar archivos.'" />
                            <input v-model="item.newName" class="image-name-overlay editable" @click.stop />
                            <div class="download-btn">
                                <a :href="getURLFile(item.file)" :download="item.file.name">
                                    <img src="../../img/ico/download.jpg">
                                </a>
                            </div>
                            <div class="delete-btn" @click.stop.prevent="removeImage(index)">‚úñ</div>
                        </div>
                        <div v-if="tooltipVisibleL" class="cursor-tooltip"
                            :style="{ top: tooltipY + 'px', left: tooltipX + 'px' }">
                            {{tooltipMsg}}
                        </div>
                    </label>
                    <input type="file" id="file-input" class="hidden-input" style="display: none;" multiple accept="*"
                        @change="handleFileChange" ref="fileInput" />
                </div>

                <div class="pure-u-1-1 formInputStandard">
                    <label>Comentarios de Asesor:</label>
                    <textarea rows="5" v-model="desistimiento.observacion" style="resize: none; height: auto;">
                    </textarea>
                </div>
            </div>

        </div>
        <div class="pure-u-2-5" style="text-align: left; padding-top: 1rem;">
            <button v-if="previews.length" @click="onSaveFiles">Guardar Adjuntos</button>
        </div>
        <div class="pure-u-1-5" style="text-align: center; padding-top: 1rem;">
            <button @click="onSave(false)"
                v-if="desistimiento.id_estado != '4' && desistimiento.id_estado != '5' && desistimiento.id_estado != '6'">
                Guardar
            </button>
        </div>
        <div class="pure-u-2-5" style="text-align: right; padding-top: 1rem;">
            <button v-if="desistimiento.id_estado === '1'" @click="setEstado('2')" class="red-btn">Solicitar</button>
            <button v-if="Number(desistimiento.id_estado) >= 2" @click="setMode(3)">Ver Solicitud</button>
        </div>

    </div>
</div>

<div v-if="mode == 3" style="padding: 1em">
    <div class="pure-u-1-24 pure-u-md-1-24"></div>
    <div class="pure-u-22-24 pure-u-md-22-24 menuCard">
        <div class='pure-u-1-1 pure-u-md-1-1 formDivision'
            style="font-size: 1.5em; margin-bottom: 4px; max-height: 2rem; overflow: hidden;">
            Cliente {{cliente.nombre_cliente}}; #{{desistimiento.radicado}}; {{desistimiento.unidad}}
        </div>

        <div style="height: calc(100vh - 16rem); overflow-y: auto;">
            <div class="pure-u-1-4 formInputStandard">
                <label>ID Venta</label>
                <input type="text" :value="desistimiento.id_venta" readonly>
            </div>
            <div class="pure-u-1-4 formInputStandard">
                <label>N√∫mero Documento</label>
                <input type="text" :value="cliente.numero_documento" readonly>
            </div>

            <div class='formDivision'>
                <span>Aprobaciones Coordinaci√≥n y Direcci√≥n</span>
            </div>
            <div class="pure-u-1-2">
                <div class="formInputStandard">
                    <label>Coordinaci√≥n de Sala</label>
                    <textarea rows="5" v-model="desistimiento.com_coordinacion" style="resize: none; height: auto;"
                        placeholder="Comentarios" :disabled="desistimiento.id_estado !== '2'"></textarea>
                </div>
                <div class="pure-u-1-2" style="padding: 0 .5rem;">
                    <input type="date" readonly :disabled="desistimiento.id_estado !== '2'"
                        :value="desistimiento.fec_com_coordinacion || formatDatetime('', 'bdate')">
                </div>
                <div class="pure-u-1-2"></div>
                <div v-bind:class="{'grp-btn-disabled': desistimiento.id_estado !== '2'}">
                    <div class="pure-u-1-2 formInputStandard">
                        <button class="red-btn" @click="desistimiento.id_estado === '2' && setEstado('3')">
                            Aprobar
                        </button>
                    </div>
                    <div class="pure-u-1-2 formInputStandard">
                        <button @click="desistimiento.id_estado === '2' && setEstado('6')">
                            No Aceptar
                        </button>
                    </div>
                </div>
            </div>
            <div class="pure-u-1-2">
                <div class="formInputStandard">
                    <label>Direcci√≥n de Sala</label>
                    <textarea rows="5" v-model="desistimiento.com_direccion" style="resize: none; height: auto;"
                        placeholder="Comentarios" :disabled="desistimiento.id_estado !== '3'"></textarea>
                </div>
                <div class="pure-u-1-2" style="padding: 0 .5rem;">
                    <input type="date" readonly :disabled="desistimiento.id_estado !== '3'"
                        :value="desistimiento.fec_com_direccion || formatDatetime('', 'bdate')">
                </div>
                <div class="pure-u-1-2"></div>
                <div v-bind:class="{'grp-btn-disabled': desistimiento.id_estado !== '3'}">
                    <div class="pure-u-1-2 formInputStandard">
                        <button class="red-btn" @click="desistimiento.id_estado === '3' && setEstado('4')">
                            Aprobar
                        </button>
                    </div>
                    <div class="pure-u-1-2 formInputStandard">
                        <button @click="desistimiento.id_estado === '3' && setEstado('6')">
                            No Aceptar
                        </button>
                    </div>
                </div>
            </div>

            <div class='formDivision deployable' @click="showCarta = !showCarta"
                v-if="desistimiento.id_estado == '4' || desistimiento.id_estado == '5'">
                <span>Carta de segunda oportunidad</span>
                <span class="arrow" v-bind:class="{'expanded': showCarta}">&lt;</span>
            </div>
            <div v-show="showCarta" style="padding: .5rem;">
                <div class="pure-u-1-5 formInputStandard">
                    <label>Titular</label>
                    <input type="text" :value="desistimiento.nombre_cliente" readonly>
                </div>
                <div class="pure-u-1-5 formInputStandard">
                    <label>Documento titular</label>
                    <input type="text" :value="desistimiento.numero_documento" readonly>
                </div>
                <div class="pure-u-1-5 formInputStandard">
                    <label>Fecha prorroga</label>
                    <input type="date" v-model="desistimiento.fecha_prorroga_carta">
                </div>
                <div class="pure-u-1-5 formInputStandard">
                    <label>Extra por prorroga</label>
                    <input type="text" v-model="f_extra_prorroga_carta" @input="validarNumero($event, true)">
                </div>
                <div class="pure-u-1-5 formInputStandard">
                    <label>Valor Carta</label>
                    <input type="text" :value="f_val_carta" readonly>
                </div>
                <div class="pure-u-1-5 formInputStandard">
                    <button>
                        Ver Carta
                    </button>
                </div>
                <div class="pure-u-1-5 formInputStandard">
                    <button class="red-btn">Enviar carta</button>
                </div>
            </div>

            <div class='formDivision deployable' @click="showCuentas = !showCuentas"
                v-if="desistimiento.id_estado == '4' || desistimiento.id_estado == '5'">
                <span>Cuenta(s) para consignaci√≥n de recursos</span>
                <button v-if="showCuentas" style="margin-left: auto; margin-right: 1rem;"
                    @click.stop.prevent="onAddAccount">
                    Agregar cuenta
                </button>
                <span class="arrow" v-bind:class="{'expanded': showCuentas}">&lt;</span>
            </div>
            <div v-show="showCuentas" style="padding: .5rem;">
                <table class="dataTable" style="font-size: 15px;">
                    <thead>
                        <tr>
                            <th style="width: 18%;">Titular</th>
                            <th style="width: 11%;">Doc. titular</th>
                            <th style="width: 13%;">Entidad financiera</th>
                            <th style="width: 14%;">Num. de cuenta</th>
                            <th style="width: 11%;">Tipo de cuenta</th>
                            <th style="width: 6%;">%</th>
                            <th style="width: 12%;">Tipo Giro</th>
                            <th style="width: 7%;">Editar</th>
                            <th style="width: 8%;">Eliminar</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr v-if="newRow" class="editTable">
                            <td>
                                <select v-model="selCliente">
                                    <option v-for="c in getCustomers()" :value="c">
                                        {{c.nombre_cliente}}
                                    </option>
                                </select>
                            </td>
                            <td>
                                <input type="text" readonly :value="selCliente.numero_documento">
                            </td>
                            <td>
                                <input type="text" v-model="cuenta.entidad">
                            </td>
                            <td>
                                <input type="text" v-model="cuenta.numero_cuenta">
                            </td>
                            <td>
                                <input type="text" v-model="cuenta.tipo_cuenta">
                            </td>
                            <td>
                                <input type="number" min="1" max="100" v-model="cuenta.porcentaje">
                            </td>
                            <td>
                                <select v-model="cuenta.tipo_giro">
                                    <option value="" selected>[Seleccione]</option>
                                    <option value="Cheque">Cheque</option>
                                    <option value="Transferencia">Transferencia</option>
                                </select>
                            </td>
                            <td style="text-align: center;">
                                <span @click.stop.prevent="onSaveAccount" class="delete">üíæ</span>
                            </td>
                            <td style="text-align: center;">
                                <span @click.stop.prevent="onDeleteAccount" class="delete">‚úñ</span>
                            </td>
                        </tr>
                        <tr v-for="(c, i) in cuentas" @click="selRow = i; editRow = false; newRow = false;"
                            v-bind:class="{'destacada': selRow === i, 'editTable': editRow && selRow === i}">
                            <td>
                                <select v-if="editRow && selRow === i" v-model="selCliente">
                                    <option v-for="cl in getCustomers()" :value="cl">
                                        {{cl.nombre_cliente}}
                                    </option>
                                </select>
                                <span v-else>{{ c.nombre_cliente }}</span>
                            </td>
                            <td>
                                <input v-if="editRow && selRow === i" type="text" readonly
                                    :value="selCliente.numero_documento">
                                <span v-else>{{ c.numero_documento }}</span>
                            </td>
                            <td>
                                <input v-if="editRow && selRow === i" type="text" v-model="cuenta.entidad">
                                <span v-else>{{ c.entidad }}</span>
                            </td>
                            <td>
                                <input v-if="editRow && selRow === i" type="text" v-model="cuenta.numero_cuenta">
                                <span @mouseenter="tooltipVisibleL = true; tooltipMsg = c.numero_cuenta;"
                                    @mouseleave="tooltipVisibleL = false;" @mousemove="updateCursor" v-else>
                                    {{ c.numero_cuenta }}
                                </span>
                            </td>
                            <td>
                                <input v-if="editRow && selRow === i" type="text" v-model="cuenta.tipo_cuenta">
                                <span v-else>{{ c.tipo_cuenta }}</span>
                            </td>
                            <td>
                                <input v-if="editRow && selRow === i" type="number" v-model="cuenta.porcentaje" min="1"
                                    max="100">
                                <span v-else>{{ c.porcentaje }}</span>
                            </td>
                            <td>
                                <select v-if="editRow && selRow === i" v-model="cuenta.tipo_giro">
                                    <option value="" selected>[Seleccione]</option>
                                    <option value="Cheque">Cheque</option>
                                    <option value="Transferencia">Transferencia</option>
                                </select>
                                <span v-else>{{ c.tipo_giro }}</span>
                            </td>
                            <td style="text-align: center;">
                                <span v-if="editRow && selRow === i" @click.stop.prevent="onSaveAccount"
                                    class="delete">üíæ</span>
                                <span v-else @click.stop.prevent="enableEdit(c, i)" class="delete">‚úèÔ∏è</span>
                            </td>
                            <td style="text-align: center;">
                                <span @click.stop.prevent="onDeleteAccount(c)" class="delete">‚úñ</span>
                            </td>

                        </tr>
                    </tbody>
                </table>
                <div v-if="tooltipVisibleL" class="cursor-tooltip"
                    :style="{ top: tooltipY + 'px', left: tooltipX + 'px' }">
                    {{tooltipMsg}}
                </div>
            </div>

        </div>

        <div class="pure-u-2-5" style="text-align: left; padding-top: 1rem;">
            <button @click="setMode(2)">Volver</button>
        </div>
        <div class="pure-u-1-5" style="text-align: center; padding-top: 1rem;">
            <button @click="onSave(false)"
                v-if="desistimiento.id_estado !== '4' && desistimiento.id_estado !== '5' && desistimiento.id_estado !== '6'">
                Guardar
            </button>
        </div>
        <div class="pure-u-2-5" style="text-align: right; padding-top: 1rem;">
            <button v-if="desistimiento.id_estado === '4'" @click="setEstado('5')" class="red-btn">
                Terminar
            </button>
        </div>
    </div>
</div>