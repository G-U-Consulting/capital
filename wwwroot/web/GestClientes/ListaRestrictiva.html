<div v-if="mode == 0" style="padding: 1em">
    <div class="pure-u-1-24 pure-u-md-1-24"></div>
    <div class="pure-u-22-24 pure-u-md-22-24 menuCard">
        <div class='pure-u-1-1 pure-u-md-1-1 formDivision' style="font-size: 1.5em; margin-bottom: 4px;">
            Clientes Bloqueados
        </div>
        <div class="filtros-container" style="padding: .7rem;">
            <div class="filtros-center" style="grid-template-columns: repeat(9, 1fr);">

                <div style="display: flex; grid-column: 1 / -1; align-items: center; gap: .5rem; width: 100%;">
                    <div class="radio-group cal-opc">
                        <label for="view-s" style="text-align: center; width: 8rem;">
                            <input type="radio" name="view" id="view-s" :checked="filMode == 'week'"
                                @click="updateFilMode('week')">
                            <span>Última Semana</span>
                        </label>
                        <label for="view-m" style="text-align: center; width: 8rem;">
                            <input type="radio" name="view" id="view-m" :checked="filMode == 'month'"
                                @click="updateFilMode('month')">
                            <span>Último Mes</span>
                        </label>
                        <label for="view-r" style="text-align: center; width: 8rem;">
                            <input type="radio" name="view" id="view-r" :checked="filMode == 'range'"
                                @click="updateFilMode('range')">
                            <span>Rango Fechas</span>
                        </label>
                    </div>
                    <div v-if="filMode == 'range'" style="display: flex; align-items: center;">
                        <input type="date" style="width: 8rem;" v-model="filtros.listas.fechaI"
                            :max="filtros.listas.fechaF">
                        &ensp;-&ensp;
                        <input type="date" style="width: 8rem;" v-model="filtros.listas.fechaF"
                            :min="filtros.listas.fechaI" :max="formatDatetime('', 'bdate')">
                    </div>
                    <div style="margin-left: auto;">
                        <img src="../../img/cli/excel_02.png" alt="Excel" class="pure-img logoExcel"
                            @click="exportExcel('listas')" title="Descargar datos a Excel" />
                    </div>
                </div>
                <div class="checkbox-group" style="margin-top: .4rem; padding-top: .5rem; border-top: 2px solid #d1d5db; 
                    justify-content: space-evenly;">
                    <div class="pure-g" style=" width: 100%;">
                        <div class="pure-u-1-4">
                            <input type="text" v-model="filtros.listas.nombre_id" placeholder="Nombre o Documento">
                        </div>
                        <div class="pure-u-1-6" style="margin-left: .5rem;">
                            <select v-model="filtros.listas.id_proyecto">
                                <option :value="undefined">[Proyecto]</option>
                                <option v-for="p in proyectos" :value="p.id_proyecto">{{p.nombre}}</option>
                            </select>
                        </div>
                    </div>
                </div>
                <!-- <div class="checkbox-group" style="margin-top: .4rem; margin-left: -5px; padding-top: .5rem; padding-left: 5px;
                    border-top: 2px solid #d1d5db; justify-content: space-evenly; grid-column: 4 / -1;">
                    <label v-for="a in acciones">
                        <input type="checkbox" :true-value="a.obj" false-value="" v-model="filtros.listas.obj"
                            @change="setAccion">
                        {{a.accion}}
                    </label>
                </div> -->
            </div>
        </div>
        <div class="main-content" style="height: calc(100vh - 20rem);">
            <table class="dataTable" style="font-size: 15px;">
                <thead>
                    <tr>
                        <th style="width: 12%;">ID Opción</th>
                        <th style="width: 33%;">Nombre</th>
                        <th style="width: 14%;">Documento</th>
                        <th style="width: 14%;">Fecha</th>
                        <th style="width: 17%;">Proyecto</th>
                        <th style="width: 10%;">Bloqueado</th>
                    </tr>
                </thead>
                <tbody>
                    <tr v-for="l in getFilteredList('listas')" @dblclick="onSelect(l)">
                        <td>{{l.id_opcion}}</td>
                        <td>{{l.nombre}}</td>
                        <td>{{l.numero_documento}}</td>
                        <td>{{l.created_on}}</td>
                        <td>{{l.proyecto}}</td>
                        <td style="text-align: center;">{{l.is_active == '1' ? 'Sí' : 'No'}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<div class="cal-modal-overlay" id="modalOverlay" @click.stop.prevent="closeModal">
    <div class="modal-container pure-g" style="display: ruby-text; min-width: 33vw; max-width: 75vw; position: relative;">
        <img src="../../img/ico/svg/cerrar-transparente.svg" @click="closeModal" class="modal-cerrar events">
        <div class="pure-u-1-1">
            <h2 style="text-align: center; margin-bottom: 1rem;">
                Coincidencias en listas
            </h2>
        </div>
        <div class="modal-scroll" style="width: 100%; min-height: 20rem; max-height: 70vh;">
            <div class="sds-flex">
                <article v-for="item in jsonList" class="sds-card" aria-label="Resultado de lista restrictiva">
                    <div class="sds-card-header">
                        <div class="sds-avatar" aria-hidden="true">{{getIniciales(item.nombre)}}</div>
                        <div>
                            <div class="sds-name">{{item.nombre}}</div>
                            <div class="sds-meta">
                                Lista: {{item.nombre_lista}} • ID lista: {{item.lista_id}} • Tipo: {{item.tipo}}
                            </div>
                        </div>
                    </div>

                    <div class="sds-rows">
                        <div v-if="item.aka.length" class="sds-row">
                            <div class="sds-label">Alias</div>
                            <div v-for="alias in item.aka" class="sds-value">
                                <span class="sds-chip">{{alias}}</span>
                            </div>
                        </div>
                        <div class="sds-row">
                            <div class="sds-label">Identificación</div>
                            <div v-for="id in item.identificacion" class="sds-value">
                                <span class="sds-chip">{{id}}</span>
                            </div>
                        </div>
                        <div class="sds-row">
                            <div class="sds-label">Nacionalidad</div>
                            <div v-for="nac in item.nacionalidad" class="sds-value">
                                <span class="sds-chip">{{nac}}</span>
                            </div>
                        </div>
                        <div class="sds-row">
                            <div class="sds-label">Coincidencia por</div>
                            <div class="sds-value">{{item.match}}</div>
                        </div>
                        <div class="sds-row">
                            <div class="sds-label">Valor de match</div>
                            <div class="sds-value">{{item.match_value}}</div>
                        </div>
                        <div class="sds-row">
                            <div class="sds-label">Nivel de riesgo</div>
                            <div class="sds-value">
                                <span class="sds-badge">
                                    <span class="sds-risk-dot" :class="`sds-risk-${item.nivel_riesgo}`"></span>
                                    {{item.nivel_riesgo}}
                                </span>
                            </div>
                        </div>
                        <div class="sds-row">
                            <div class="sds-label">Coincidencia</div>
                            <div class="sds-value">
                                <div class="sds-progress" aria-label="Porcentaje de coincidencia">
                                    <span style="width: 100%"></span>
                                </div>
                                <div class="sds-meta" style="margin-top:6px">{{item.porcentaje}}%</div>
                            </div>
                        </div>
                        <div class="sds-row">
                            <div class="sds-label">ID interno</div>
                            <div class="sds-value">{{item.id}}</div>
                        </div>
                    </div>
                </article>

            </div>
        </div>
        <div style="display: flex; width: 100%; justify-content: center; gap: 1rem; margin-top: .5rem;">
            <button @click="closeModal()">Volver</button>
            <button v-if="lista.is_active == '1'" @click="onDelete">Desbloquear</button>
        </div>
    </div>
</div>