<div v-if="mode == 0" style="padding: 1em">
    <div class="pure-u-1-24 pure-u-md-1-24"></div>
    <div class="pure-u-22-24 pure-u-md-22-24 menuCard">
        <div class='pure-u-1-1 pure-u-md-1-1 formDivision right-button' style="margin-bottom: 4px;">
            <span style="font-size: 1.5em;">Trazabilidad Estados Clientes</span>
            <div style="display: flex; gap: 5px; width: 240px;">
                <button>Enviar Correos</button>
                <button>Ver GrÃ¡fico</button>
            </div>
        </div>
        <div class="filtros-container" style="padding: .7rem;">
            <div class="filtros-center" style="grid-template-columns: repeat(9, 1fr);">

                <div style="display: flex; grid-column: 1 / -1; align-items: center; gap: .5rem">
                    <div class="radio-group cal-opc">
                        <label for="view-s" style="text-align: center; width: 8rem;">
                            <input type="radio" name="view" id="view-s" :checked="filMode == 'week'"
                                @click="updateFilMode('week')">
                            <span>Ãšltima Semana</span>
                        </label>
                        <label for="view-m" style="text-align: center; width: 8rem;">
                            <input type="radio" name="view" id="view-m" :checked="filMode == 'month'"
                                @click="updateFilMode('month')">
                            <span>Ãšltimo Mes</span>
                        </label>
                        <label for="view-r" style="text-align: center; width: 8rem;">
                            <input type="radio" name="view" id="view-r" :checked="filMode == 'range'"
                                @click="updateFilMode('range')">
                            <span>Rango Fechas</span>
                        </label>
                    </div>
                    <div v-if="filMode == 'range'" style="display: flex; align-items: center;">
                        <input type="date" style="width: 8rem;">
                        &ensp;-&ensp;
                        <input type="date" style="width: 8rem;">
                    </div>
                </div>
                <div class="checkbox-group" style="margin-top: .4rem; padding-top: .5rem; border-top: 2px solid #d1d5db; 
                    justify-content: space-evenly; grid-column: 1 / 4;">
                    <select>
                        <option value="">[Asesor]</option>
                        <option v-for="a in asesores" :value="a">{{a.nombres}}</option>
                    </select>
                </div>
                <div class="checkbox-group" style="margin-top: .4rem; margin-left: -5px; padding-top: .5rem; padding-left: 5px;
                    border-top: 2px solid #d1d5db; justify-content: space-evenly; grid-column: 4 / -1;">
                    <label><input type="checkbox" true-value="1" false-value=""> Visitas</label>
                    <label><input type="checkbox" true-value="1" false-value=""> Cotizaciones</label>
                    <label><input type="checkbox" true-value="1" false-value=""> Opciones</label>
                    <label><input type="checkbox" true-value="1" false-value=""> Ventas</label>
                    <label><input type="checkbox" true-value="1" false-value=""> Liberaciones</label>
                </div>
            </div>
        </div>

        <div style="height: calc(100vh - 20rem); overflow-y: auto;">

            <table class="dataTable">
                <thead>
                    <tr>
                        <th style="width: 19%;">Unidad</th>
                        <th style="width: 15%;">Piso</th>
                        <th style="width: 23%;">Clase</th>
                        <th style="width: 19%;">Tipo</th>
                        <th style="width: 19%;">Estado</th>
                        <th style="width: 5%;"></th>
                    </tr>
                </thead>
                <tbody>
                    <tr v-for="u in getFilteredList('unidades')" @dblclick="onSelect(u)">
                        <td>{{u.unidad}}</td>
                        <td>{{u.piso}}</td>
                        <td>{{u.clase}}</td>
                        <td>{{u.tipo}}</td>
                        <td>{{u.estado_unidad}}</td>
                        <td style="text-align: center;">{{u.id_estado_unidad && u.id_estado_unidad != '1' ? 'ðŸ”’' : ''}}
                        </td>
                    </tr>
                </tbody>
            </table>

        </div>
    </div>
</div>

<div v-if="mode == 1" style="padding: 1em">
    <div class="pure-u-1-24 pure-u-md-1-24"></div>
    <div class="pure-u-22-24 pure-u-md-22-24 menuCard">
        <div class='pure-u-1-1 pure-u-md-1-1 formDivision' style="font-size: 1.5em; margin-bottom: 4px;">
            Historial de cambios: {{unidad.unidad}}
        </div>

        <div class="pure-u-1-1" style="background: #f4f6f8; height: calc(100vh - 13rem); overflow-y: auto;">
            <div class="log-container">
                <div class="log-entry" v-for="log in unidad.logs">
                    <div class="log-header">
                        <div class="log-title" v-html="log.titulo"></div>
                        <div class="log-date">{{log.fecha}}</div>
                    </div>
                    <div class="log-content" v-html="log.texto"></div>
                    <div class="log-footer">
                        Responsable: {{log.usuario}}
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>