<div class="pure-g">
    <div class="pure-u-1-1 pure-u-md-1-5 lateralMenu">
        <div class="lateralMenuHeader">
        </div>

        <div class="lateralMenuGroup">
            <div class="lateralMenuItem noSelect group" style="padding-left: 8px; cursor: auto;">
                Listados Maestros
            </div>
        </div>

        <div class="lateralMenuGroup">
            <div v-on:click="setMainMode(1);loadImg();" class="lateralMenuItem noSelect group">
                Imágenes C.Capital
            </div>
            <div v-on:click="setMainMode(1);loadImg();" class="lateralMenuItem noSelect tooltip"
                v-bind:class="{'lateralMenuItemSelected': mainmode == 1}">
                <img src="./img/ico/svg/notebook.svg" />
                Generales Capital
                <span class="tooltip-text">Imágenes generales capital</span>
            </div>
            <div v-on:click="setMainMode(2);loadImg();" class="lateralMenuItem noSelect tooltip"
                v-bind:class="{'lateralMenuItemSelected': mainmode == 2}">
                <img src="./img/ico/svg/notebook.svg" />
                Sostenibilidad
                <span class="tooltip-text">Imágenes sostenibilidad</span>
            </div>
        </div>

        <div class="lateralMenuGroup">
            <div v-on:click="setMainMode(4)" class="lateralMenuItem noSelect group">
                Medios de Comunicación
            </div>
            <div v-on:click="setMainMode(4)" class="lateralMenuItem noSelect tooltip"
                v-bind:class="{'lateralMenuItemSelected': mainmode == 4}">
                <img src="./img/ico/svg/notebook.svg" />
                Categorías
                <span class="tooltip-text">Categorías medios</span>
            </div>
            <div v-on:click="setMainMode(5)" class="lateralMenuItem noSelect tooltip"
                v-bind:class="{'lateralMenuItemSelected': mainmode == 5}">
                <img src="./img/ico/svg/notebook.svg" />
                Medios
                <span class="tooltip-text">Medios publicitarios</span>
            </div>
        </div>

        <div class="lateralMenuGroup">
            <div v-on:click="setMainMode(6)" class="lateralMenuItem noSelect group">
                Financiación
            </div>
            <div v-on:click="setMainMode(6)" class="lateralMenuItem noSelect tooltip"
                v-bind:class="{'lateralMenuItemSelected': mainmode == 6}">
                <img src="./img/ico/svg/notebook.svg" />
                Bancos
                <span class="tooltip-text">Bancos</span>
            </div>
            <div v-on:click="setMainMode(7)" class="lateralMenuItem noSelect tooltip"
                v-bind:class="{'lateralMenuItemSelected': mainmode == 7}">
                <img src="./img/ico/svg/notebook.svg" />
                Fiduciarias
                <span class="tooltip-text">Fiduciarias</span>
            </div>
            <div v-on:click="setMainMode(14)" class="lateralMenuItem noSelect tooltip"
                v-bind:class="{'lateralMenuItemSelected': mainmode == 14}">
                <img src="./img/ico/svg/notebook.svg" />
                Subsidios VIS
                <span class="tooltip-text">Subsidios VIS</span>
            </div>
            <div v-on:click="setMainMode(15)" class="lateralMenuItem noSelect tooltip"
                v-bind:class="{'lateralMenuItemSelected': mainmode == 15}">
                <img src="./img/ico/svg/notebook.svg" />
                Tipos
                <span class="tooltip-text">Tipos de Financiación</span>
            </div>
        </div>

        <div class="lateralMenuGroup">
            <div v-on:click="setMainMode(8)" class="lateralMenuItem noSelect group">
                Agrupación de Proyectos
            </div>
            <div v-on:click="setMainMode(8)" class="lateralMenuItem noSelect tooltip"
                v-bind:class="{'lateralMenuItemSelected': mainmode == 8}">
                <img src="./img/ico/svg/notebook.svg" />
                Zonas Proyectos
                <span class="tooltip-text">Zonas agrupamiento proyectos</span>
            </div>
            <div v-on:click="setMainMode(9)" class="lateralMenuItem noSelect tooltip"
                v-bind:class="{'lateralMenuItemSelected': mainmode == 9}">
                <img src="./img/ico/svg/notebook.svg" />
                Ciudadelas
                <span class="tooltip-text">Ciudadelas</span>
            </div>
        </div>
        
        <div class="lateralMenuGroup">
            <div v-on:click="setMainMode(16)" class="lateralMenuItem noSelect group">
                Proyectos
            </div>
            <div v-on:click="setMainMode(16)" class="lateralMenuItem noSelect tooltip"
                v-bind:class="{'lateralMenuItemSelected': mainmode == 16}">
                <img src="./img/ico/svg/notebook.svg" />
                Tipo Unidades
                <span class="tooltip-text">Tipo Unidades y Ventas</span>
            </div>
            <div v-on:click="setMainMode(17)" class="lateralMenuItem noSelect tooltip"
                v-bind:class="{'lateralMenuItemSelected': mainmode == 17}">
                <img src="./img/ico/svg/notebook.svg" />
                Estados
                <span class="tooltip-text">Estados de Proyecto</span>
            </div>
            <div v-on:click="setMainMode(18)" class="lateralMenuItem noSelect tooltip"
                v-bind:class="{'lateralMenuItemSelected': mainmode == 18}">
                <img src="./img/ico/svg/notebook.svg" />
                Tipologías
                <span class="tooltip-text">Tipologías de Proyecto</span>
            </div>
            <div v-on:click="setMainMode(19)" class="lateralMenuItem noSelect tooltip"
                v-bind:class="{'lateralMenuItemSelected': mainmode == 19}">
                <img src="./img/ico/svg/notebook.svg" />
                Emails receptores
                <span class="tooltip-text">Emails receptores</span>
            </div>
            <div v-on:click="setMainMode(3)" class="lateralMenuItem noSelect tooltip"
                v-bind:class="{'lateralMenuItemSelected': mainmode == 3}">
                <img src="./img/ico/svg/notebook.svg" />
                Grupos de img
                <span class="tooltip-text">Agrupamiento de imágenes</span>
            </div>
        </div>

        <div class="lateralMenuGroup">
            <div v-on:click="setMainMode(10)" class="lateralMenuItem noSelect group">
                Documentos
            </div>
            <div v-on:click="setMainMode(10)" class="lateralMenuItem noSelect tooltip"
                v-bind:class="{'lateralMenuItemSelected': mainmode == 10}">
                <img src="./img/ico/svg/notebook.svg" />
                Instructivos
                <span class="tooltip-text">Instructivos consignación y cierre</span>
            </div>
            <div v-on:click="setMainMode(11)" class="lateralMenuItem noSelect tooltip"
                v-bind:class="{'lateralMenuItemSelected': mainmode == 11}">
                <img src="./img/ico/svg/notebook.svg" />
                Pies Legales
                <span class="tooltip-text">Pies legales cotizaciones</span>
            </div>
            <div v-on:click="setMainMode(12)" class="lateralMenuItem noSelect tooltip"
                v-bind:class="{'lateralMenuItemSelected': mainmode == 12}">
                <img src="./img/ico/svg/notebook.svg" />
                Trámites
                <span class="tooltip-text">Trámites</span>
            </div>
            <div v-on:click="setMainMode(13)" class="lateralMenuItem noSelect tooltip"
                v-bind:class="{'lateralMenuItemSelected': mainmode == 13}">
                <img src="./img/ico/svg/notebook.svg" />
                Otros
                <span class="tooltip-text">Otros Documentos</span>
            </div>
        </div>

        <div class="lateralMenuGroup">
        </div>
    </div>

    <div class="pure-u-1-1 pure-u-md-4-5">

        <div v-if="mainmode == 0" class="contentHeight" 
            style="display: block; background-image: url('./img/background/floor-plan-1857175_1280.jpg'); 
            background-attachment: fixed; background-repeat: no-repeat; background-size: cover;">
        </div>

        <!-- Imágenes Generales Capital y Sostenibilidad -->
        <div v-if="mainmode == 1 || mainmode == 2">
            <div style="font-size: 1rem; border-bottom: 1px solid rgb(231, 231, 231); padding: 1rem; ">
                <div style="display: inline;" v-for="(r, i) in ruta.filter(r => r.text)" @click="r.action">
                    <span class="hoverLink">{{ r.text }}</span>
                    <span v-if="i < ruta.length - 1"> / </span>
                </div>
            </div>

            <div v-if="mode == 0" style="padding: 1em">{{mode = 2}}</div>

            <div v-if="mode == 2" style="padding: 1em; height: max-content;" class="pure-g">
                <div class='pure-u-1-1 pure-u-md-1-1 formDivision' style="font-size: 1.5em; margin-bottom:4px">
                    Imágenes {{mainmode == 1 ? 'Generales Capital' : 'Sostenibilidad'}}
                </div>
                <div class='pure-u-1-1 pure-u-md-1-24 positTex'>
                    <img class="pure-img logoExcel" src="../../img/ico/svg/delete.svg" @click="clearAllImages" alt="">
                </div>
                <div class="pure-u-1" @mousemove="updateCursor" @mouseleave="tooltipVisible = false"
                    style="position: relative;padding-top: 1em;">
                    <label for="file-input" class="preview-container" style="height: calc(100vh - 17rem); cursor: pointer; max-height: 100%;"
                        @dragover.prevent="handleDragOver" @drop.prevent="handleDrop" @mouseenter="tooltipVisible = true"
                        @mouseleave="tooltipVisible = false">
                
                        <div class="image-card" v-for="(item, index) in previews" :key="index" draggable="true"
                            @dragstart="dragStart(index)" @mouseenter="tooltipVisible = false" @mouseleave="tooltipVisible = true"
                            style="position: relative;">
                            <img :src="item.src" @click.stop.prevent="" 
                            @mouseenter="tooltipVisible = true; tooltipMsg = item.file.name"
                            @mouseleave="tooltipVisible = false; tooltipMsg = 'Arrastra o haz clic para cargar archivos.'"/>
                            <div class="image-name-overlay">{{ item.file.name }}</div>
                            <div class="download-btn">
                                <a :href="getURLFile(item.file)" :download="item.file.name">
                                    <img src="../../img/ico/download.jpg">
                                </a>
                            </div>
                            <div class="delete-btn" @click.stop.prevent="removeImage(index)">✖</div>
                        </div>
                        <div v-if="tooltipVisible" class="cursor-tooltip" :style="{ top: tooltipY + 'px', left: tooltipX + 'px' }">
                            {{tooltipMsg}}
                        </div>
                    </label>
                    <input type="file" id="file-input" class="hidden-input" style="display: none;" multiple accept="image/*"
                        @change="handleFileChange" ref="fileInput" />
                </div>
                
                <div class='pure-u-1-1 pure-u-md-2-5'></div>
                <div class='pure-u-1-1 pure-u-md-1-5 positTex'>
                    <button v-on:click="onUpdateImg()" style="margin-top: .8rem;">Guardar</button>
                </div>
            </div>
        </div>

        <!-- Agrupamiento de Imágenes -->
        <div v-if="mainmode == 3">
            <div style="font-size: 1rem; border-bottom: 1px solid rgb(231, 231, 231); padding: 1rem; ">
                <div style="display: inline;" v-for="(r, i) in ruta.filter(r => r.text)" @click="r.action">
                    <span class="hoverLink">{{ r.text }}</span>
                    <span v-if="i < ruta.length - 1"> / </span>
                </div>
            </div>

            <div v-if="mode == 0" style="padding: 1em">
                <div class="pure-u-1-24 pure-u-md-1-6"></div>
                <div class="pure-u-22-24 pure-u-md-2-3 menuCard">
                    <h2>Agrupamiento de Imágenes</h2>
                    <div class="searchBox">
                        <div class="pure-g">
                            <div class="pure-u-1-1 pure-u-md-10-24">
                                <input type="text" placeholder="Nombre" v-model="filtros.gruposImg['grupo']"/>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-2-24">
                                <div class="imgGraybutton" @click="onClear('gruposImg')">
                                    <img src="./img/ico/eraser.png" />
                                </div>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-3-24">
                                <select v-model="filtros.gruposImg['is_active']" class="pure-input-1">
                                    <option value="">[Todos]</option>
                                    <option value="1">Activos</option>
                                    <option value="0">Inactivos</option>
                                </select>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-1-24"></div>
                            <div class="pure-u-1-2 pure-u-md-1-24">
                                <img src="../../img/cli/excel_02.png" alt="Excel" class="pure-img logoExcel"  
                                    @click="exportExcel('gruposImg')" title="Descargar datos a Excel" />
                            </div>
                            <div class="pure-u-1-1 pure-u-md-1-24"></div>
                            <div class="pure-u-1-1 pure-u-md-1-4">
                                <button v-on:click="setMode(1)">Nuevo Grupo</button>
                            </div>
                        </div>
                    </div>
                    <div class="main-content">
                        <table class="dataTable" style="table-layout: auto;" v-if="gruposImg && gruposImg.length">
                            <thead>
                                <tr>
                                    <th v-for="key in Object.keys(gruposImg[0]).filter(k => !k.startsWith('id_') && !k.startsWith('is_') )">
                                        {{key.replaceAll("_"," ")}}
                                    </th>
                                    <th>Activo</th>
                                    <th>Eliminar</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="gru in getFilteredList('gruposImg')" @click="onSelect(gru)">
                                    <td v-for="key in Object.keys(gru).filter(k => !k.startsWith('id_') && !k.startsWith('is_') )">{{gru[key]}}
                                    </td>
                                    <td style="text-align: center;">
                                        <div class="toggle-switch" @click.stop.prevent="toggleState(gru)">
                                            <input :id="'toggle' + gru.grupo" type="checkbox" class="toggle-input" 
                                                :checked="Number(gru.is_active) !== 1">
                                            <label class="toggle-label" :for="'toggle' + gru.grupo" style="transform: rotate(180deg);"></label>
                                        </div>
                                    </td>
                                    <td style="text-align: center;">
                                        <span @click.stop.prevent="requestDelete(gru)" class="delete">✖</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div v-if="mode == 1 || mode == 2" style="padding: 1em; height: max-content;" class="pure-g">
                <div class="pure-u-1-24 pure-u-md-1-6"></div>
                <div class="pure-u-22-24 pure-u-md-2-3 menuCard" style="margin: 0em 0em 0.5em 0em;">
                    <h2>{{mode == 1 ? 'Nuevo' : 'Editar'}} Grupo de Imágenes</h2>
                    <div class="pure-g">
                        <div class="formInputStandard pure-u-1-2 pure-u-md-1-2">
                            <span>Nombre</span>
                            <input type="text" v-model="grupoImg.grupo" />
                        </div>
                        <div class="formInputStandard pure-u-1-2 pure-u-md-1-5">
                            <span>Orden</span>
                            <input type="number" v-model="grupoImg.orden" />
                        </div>
                        <div class="formInputStandard pure-u-1-2 pure-u-md-1-5">
                            <div style="display: block; margin-bottom: 0.3rem; height: 1.3rem;"></div>
                            <button v-on:click="onSave()">Guardar</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Categorías de Medios -->
        <div v-if="mainmode == 4">
            <div style="font-size: 1rem; border-bottom: 1px solid rgb(231, 231, 231); padding: 1rem; ">
                <div style="display: inline;" v-for="(r, i) in ruta.filter(r => r.text)" @click="r.action">
                    <span class="hoverLink">{{ r.text }}</span>
                    <span v-if="i < ruta.length - 1"> / </span>
                </div>
            </div>

            <div v-if="mode == 0" style="padding: 1em">
                <div class="pure-u-1-24 pure-u-md-1-6"></div>
                <div class="pure-u-22-24 pure-u-md-2-3 menuCard">
                    <h2>Categorías de Medios</h2>
                    <div class="searchBox">
                        <div class="pure-g">
                            <div class="pure-u-1-1 pure-u-md-10-24">
                                <input type="text" placeholder="Nombre" v-model="filtros.categoriasMedios['categoria']"/>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-2-24">
                                <div class="imgGraybutton" @click="onClear('categoriasMedios')">
                                    <img src="./img/ico/eraser.png" />
                                </div>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-3-24">
                                <select v-model="filtros.categoriasMedios['is_active']" class="pure-input-1">
                                    <option value="">[Todos]</option>
                                    <option value="1">Activos</option>
                                    <option value="0">Inactivos</option>
                                </select>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-1-24"></div>
                            <div class="pure-u-1-2 pure-u-md-1-24">
                                <img src="../../img/cli/excel_02.png" alt="Excel" class="pure-img logoExcel"  
                                    @click="exportExcel('categoriasMedios')" title="Descargar datos a Excel" />
                            </div>
                            <div class="pure-u-1-1 pure-u-md-1-24"></div>
                            <div class="pure-u-1-1 pure-u-md-1-4">
                                <button v-on:click="setMode(1)">Nueva Categoria</button>
                            </div>
                        </div>
                    </div>
                    <div class="main-content">
                        <table class="dataTable" style="table-layout: auto;" v-if="categoriasMedios && categoriasMedios.length">
                            <thead>
                                <tr>
                                    <th
                                        v-for="key in Object.keys(categoriasMedios[0]).filter(k => !k.startsWith('id_') && !k.startsWith('is_'))">
                                        {{key.replaceAll("_"," ")}}
                                    </th>
                                    <th>Activo</th>
                                    <th>Eliminar</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="cat in getFilteredList('categoriasMedios')" @click.stop.prevent="onSelect(cat)">
                                    <td v-for="key in Object.keys(cat).filter(k => !k.startsWith('id_') && !k.startsWith('is_'))">
                                        {{cat[key]}}
                                    </td>
                                    <td style="text-align: center;">
                                        <div class="toggle-switch" @click.stop.prevent="toggleState(cat)">
                                            <input :id="'toggle' + cat.categoria" type="checkbox" class="toggle-input" 
                                                :checked="Number(cat.is_active) !== 1">
                                            <label class="toggle-label" :for="'toggle' + cat.categoria" style="transform: rotate(180deg);"></label>
                                        </div>
                                    </td>
                                    <td style="text-align: center;">
                                        <span @click.stop.prevent="requestDelete(cat)" class="delete">✖</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div v-if="mode == 1 || mode == 2" style="padding: 1em; height: max-content;" class="pure-g">
                <div class="pure-u-1-24 pure-u-md-1-6"></div>
                <div class="pure-u-22-24 pure-u-md-2-3 menuCard" style="margin: 0em 0em 0.5em 0em;">
                    <h2>{{mode == 1 ? 'Nueva' : 'Editar'}} Categoria</h2>
                    <div class="pure-g">
                        <div class="formInputStandard pure-u-1-2 pure-u-md-16-24">
                            <input type="text" v-model="categoriaMedio.categoria" />
                        </div>
                        <div class="formInputStandard pure-u-1-2 pure-u-md-1-5">
                            <button v-on:click="onSave()">Guardar</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Medios Publicitarios -->
        <div v-if="mainmode == 5">
            <div style="font-size: 1rem; border-bottom: 1px solid rgb(231, 231, 231); padding: 1rem; ">
                <div style="display: inline;" v-for="(r, i) in ruta.filter(r => r.text)" @click="r.action">
                    <span class="hoverLink">{{ r.text }}</span>
                    <span v-if="i < ruta.length - 1"> / </span>
                </div>
            </div>

            <div v-if="mode == 0" style="padding: 1em">
                <div class="pure-u-1-1 menuCard">
                    <h2>Medios Publicitarios</h2>
                    <div class="searchBox">
                        <div class="pure-g">
                            <div class="pure-u-1-1 pure-u-md-5-24">
                                <input type="text" placeholder="Nombre" v-model="filtros.mediosPublicitarios['medio']"/>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-2-24">
                                <div class="imgGraybutton" @click="onClear('mediosPublicitarios')">
                                    <img src="./img/ico/eraser.png" />
                                </div>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-4-24">
                                <select v-model="filtros.mediosPublicitarios['id_categoria']" class="pure-input-1">
                                    <option value="">[Todas las categorias]</option>
                                    <option v-for="item in categoriasMedios" :value="item.id_categoria">{{item.categoria}}</option>
                                </select>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-1-24"></div>
                            <div class="pure-u-1-1 pure-u-md-3-24">
                                <select v-model="filtros.mediosPublicitarios['is_active']" class="pure-input-1">
                                    <option value="">[Todos]</option>
                                    <option value="1">Activos</option>
                                    <option value="0">Inactivos</option>
                                </select>
                            </div>
                           <div class="pure-u-1-1 pure-u-md-1-24"></div>
                            <div class="pure-u-1-2 pure-u-md-1-24">
                                <img src="../../img/cli/excel_02.png" alt="Excel" class="pure-img logoExcel"  
                                    @click="exportExcel('mediosPublicitarios')" title="Descargar datos a Excel" />
                            </div>
                            <div class="pure-u-1-1 pure-u-md-1-24"></div>

                            <div class="pure-u-1-1 pure-u-md-1-4">
                                <button v-on:click="setMode(1)">Nuevo Medio</button>
                            </div>
                        </div>
                    </div>
                    <div class="main-content">
                        <table class="dataTable" style="table-layout: auto;" v-if="mediosPublicitarios && mediosPublicitarios.length">
                            <thead>
                                <tr>
                                    <th
                                        v-for="key in Object.keys(mediosPublicitarios[0]).filter(k => !k.startsWith('id_') && !k.startsWith('is_'))">
                                        {{key.replaceAll("_"," ")}}
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="med in getFilteredList('mediosPublicitarios')" @click="onSelect(med)">
                                    <td
                                        v-for="key in Object.keys(med).filter(k => !k.startsWith('id_') && !k.startsWith('is_'))">
                                        {{med[key]}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div v-if="mode == 1 || mode == 2" style="padding: 1em; height: max-content;" class="pure-g">
                <div class="pure-u-1-24 pure-u-md-1-6"></div>
                <div class="pure-u-22-24 pure-u-md-2-3 menuCard" style="margin: 0em 0em 0.5em 0em;">
                    <h2>{{mode == 1 ? 'Nuevo' : 'Editar'}} Medio</h2>
                    <div class="pure-g">
                        <div class="formInputStandard pure-u-1-2 pure-u-md-1-2">
                            <span>Nombre</span>
                            <input type="text" v-model="medioPublicitario.medio" />
                        </div>
                        <div class="formInputStandard pure-u-1-2 pure-u-md-1-3">
                            <span>Categoria</span>
                            <select v-model='medioPublicitario.id_categoria'>
                                <option value='' disabled selected>Seleccione</option>
                                <option v-for="cat in categoriasMedios.sort((a, b) => parseInt(b.is_active) - parseInt(a.is_active))" 
                                    :value='cat.id_categoria' :disabled="cat.is_active != '1'">
                                    {{ cat.categoria }}
                                </option>
                            </select>
                        </div>
                        <div class="formInputStandard pure-u-1-2 pure-u-md-1-3">
                            <span>ID en Sinco</span>
                            <input type="text" v-model="medioPublicitario.id_sinco" />
                        </div>
                        <div class='formInputStandard pure-u-1-2 pure-u-md-1-5'>
                            <label class="check" for="medioIsActive" style="margin-top: 1.8rem;">
                                <input type='checkbox' value='0' v-model='medioIsActive' id='medioIsActive' />
                                <span class="checkmark"></span>
                                Activo
                            </label>
                        </div>
                    </div>
                    <div class="pure-g">
                        <div class="formInputStandard pure-u-1-2 pure-u-md-1-5">
                            <div style="display: block; height: 1.3rem;"></div>
                            <button v-on:click="onSave()">Guardar</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bancos -->
        <div v-if="mainmode == 6">
            <div style="font-size: 1rem; border-bottom: 1px solid rgb(231, 231, 231); padding: 1rem; ">
                <div style="display: inline;" v-for="(r, i) in ruta.filter(r => r.text)" @click="r.action">
                    <span class="hoverLink">{{ r.text }}</span>
                    <span v-if="i < ruta.length - 1"> / </span>
                </div>
            </div>

            <div v-if="mode == 0" style="padding: 1em">
                <div class="pure-u-1-24 pure-u-md-1-6"></div>
                <div class="pure-u-22-24 pure-u-md-2-3 menuCard">
                    <h2>Bancos</h2>
                    <div class="searchBox">
                        <div class="pure-g">
                            <div class="pure-u-1-1 pure-u-md-10-24">
                                <input type="text" placeholder="Nombre" v-model="filtros.bancos['banco']"/>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-2-24">
                                <div class="imgGraybutton" @click="onClear('bancos')">
                                    <img src="./img/ico/eraser.png" />
                                </div>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-3-24">
                                <select v-model="filtros.bancos['is_active']" class="pure-input-1">
                                    <option value="">[Todos]</option>
                                    <option value="1">Activos</option>
                                    <option value="0">Inactivos</option>
                                </select>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-1-24"></div>
                            <div class="pure-u-1-2 pure-u-md-1-24">
                                <img src="../../img/cli/excel_02.png" alt="Excel" class="pure-img logoExcel"  
                                    @click="exportExcel('bancos')" title="Descargar datos a Excel" />
                            </div>
                            <div class="pure-u-1-1 pure-u-md-1-24"></div>
                            <div class="pure-u-1-1 pure-u-md-1-4">
                                <button v-on:click="setMode(1)">Nuevo Banco</button>
                            </div>
                        </div>
                    </div>
                    <div class="main-content">
                        <table class="dataTable" style="table-layout: auto;" v-if="bancos && bancos.length">
                            <thead>
                                <tr>
                                    <th v-for="key in Object.keys(bancos[0]).filter(k => !k.startsWith('id_') && !k.startsWith('is_') )">
                                        {{key.replaceAll("_"," ")}}
                                    </th>
                                    <th>Activo</th>
                                    <th>Eliminar</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="banco in getFilteredList('bancos')" @click="onSelect(banco)">
                                    <td v-for="key in Object.keys(banco).filter(k => !k.startsWith('id_') && !k.startsWith('is_') )">
                                        {{banco[key]}}</td>
                                    <td style="text-align: center;">
                                        <div class="toggle-switch" @click.stop.prevent="toggleState(banco)">
                                            <input :id="'toggle' + banco.banco" type="checkbox" class="toggle-input" 
                                                :checked="Number(banco.is_active) !== 1">
                                            <label class="toggle-label" :for="'toggle' + banco.banco" style="transform: rotate(180deg);"></label>
                                        </div>
                                    </td>
                                    <td style="text-align: center;">
                                        <span @click.stop.prevent="requestDelete(banco)" class="delete">✖</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div v-if="mode == 1 || mode == 2" style="padding: 1em; height: max-content;" class="pure-g">
                <div class="pure-u-1-24 pure-u-md-1-6"></div>
                <div class="pure-u-22-24 pure-u-md-2-3 menuCard" style="margin: 0em 0em 0.5em 0em;">
                    <h2>{{mode == 1 ? 'Nuevo' : 'Editar'}} Banco</h2>
                    <div class="pure-g">
                        <div class="formInputStandard pure-u-1-2 pure-u-md-16-24">
                            <input type="text" v-model="banco.banco" />
                        </div>
                        <div class="formInputStandard pure-u-1-2 pure-u-md-1-5">
                            <button v-on:click="onSave()">Guardar</button>
                        </div>
                    </div>

                    <div v-if="mode == 2" class="pure-g">
                        <div class="pure-u-1-1 pure-u-md-1-1" style="margin-top: 2rem;">
                            <div style="height: calc(100vh - 18rem); overflow-y: auto;">
                                <table class="dataTable" style="table-layout: auto;" v-if="factores && factores.length">
                                    <thead>
                                        <tr>
                                            <th
                                                v-for="key in Object.keys(factores[0]).filter(k => !k.startsWith('id_') && !k.startsWith('is_') )">
                                                {{key.replaceAll("_"," ")}}
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr v-for="fac in factores" @click="onSelectFactor(fac)">
                                            <td v-for="key in Object.keys(fac).filter(k => !k.startsWith('id_') && !k.startsWith('is_') )">
                                                {{fac[key]}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div v-if="mode == 3" style="padding: 1em; height: max-content;" class="pure-g">
                <div class="pure-u-1-24 pure-u-md-1-6"></div>
                <div class="pure-u-22-24 pure-u-md-2-3 menuCard" style="margin: 0em 0em 0.5em 0em;">
                    <h2>Editar Factores</h2>
                    <div class="pure-g" style="align-items: flex-end;">

                        <div class="pure-u-1-2 pure-u-md-1-2" v-for="bf in banco_factor">
                            <div class="pure-g">
                                <div class="formInputStandard pure-u-1-1 pure-u-md-1-2">
                                    <span>{{tipos_factor.filter(tf => tf.id_tipo_factor ==
                                        bf.id_tipo_factor)[0].tipo_factor}}</span>
                                    <input type="number" v-model="banco_factor[bf.id_tipo_factor].valor" />
                                </div>
                                <div class="pure-u-md-1-2" style="width: 1px;"></div>
                            </div>
                        </div>
                    </div>

                    <div class="pure-g" style="margin-top: 2rem;">
                        <div class="formInputStandard pure-u-1-2 pure-u-md-1-2">
                            <button v-on:click="mode = 2;setRuta();">Cancelar</button>
                        </div>
                        <div class="formInputStandard pure-u-1-2 pure-u-md-1-2">
                            <button v-on:click="onUpdateFactor()">Guardar</button>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <!-- Fiduciarias -->
        <div v-if="mainmode == 7">
            <div style="font-size: 1rem; border-bottom: 1px solid rgb(231, 231, 231); padding: 1rem; ">
                <div style="display: inline;" v-for="(r, i) in ruta.filter(r => r.text)" @click="r.action">
                    <span class="hoverLink">{{ r.text }}</span>
                    <span v-if="i < ruta.length - 1"> / </span>
                </div>
            </div>

            <div v-if="mode == 0" style="padding: 1em">
                <div class="pure-u-1-24 pure-u-md-1-6"></div>
                <div class="pure-u-22-24 pure-u-md-2-3 menuCard">
                    <h2>Fiduciarias</h2>
                    <div class="searchBox">
                        <div class="pure-g">
                            <div class="pure-u-1-1 pure-u-md-10-24">
                                <input type="text" placeholder="Nombre" v-model="filtros.fiduciarias['fiduciaria']"/>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-2-24">
                                <div class="imgGraybutton" @click="onClear('fiduciarias')">
                                    <img src="./img/ico/eraser.png" />
                                </div>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-3-24">
                                <select v-model="filtros.fiduciarias['is_active']" class="pure-input-1">
                                    <option value="">[Todos]</option>
                                    <option value="1">Activos</option>
                                    <option value="0">Inactivos</option>
                                </select>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-1-24"></div>
                            <div class="pure-u-1-2 pure-u-md-1-24">
                                <img src="../../img/cli/excel_02.png" alt="Excel" class="pure-img logoExcel"  
                                    @click="exportExcel('fiduciarias')" title="Descargar datos a Excel" />
                            </div>
                            <div class="pure-u-1-1 pure-u-md-1-24"></div>
                            <div class="pure-u-1-1 pure-u-md-1-4">
                                <button v-on:click="setMode(1)">Nueva Fiduciaria</button>
                            </div>
                        </div>
                    </div>
                    <div class="main-content">
                        <table class="dataTable" style="table-layout: auto;" v-if="fiduciarias && fiduciarias.length">
                            <thead>
                                <tr>
                                    <th v-for="key in Object.keys(fiduciarias[0]).filter(k => !k.startsWith('id_') && !k.startsWith('is_') )">
                                        {{key.replaceAll("_"," ")}}
                                    </th>
                                    <th>Activo</th>
                                    <th>Eliminar</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="fid in getFilteredList('fiduciarias')" @click="onSelect(fid)">
                                    <td v-for="key in Object.keys(fid).filter(k => !k.startsWith('id_') && !k.startsWith('is_') )">
                                        {{fid[key]}}</td>
                                    <td style="text-align: center;">
                                        <div class="toggle-switch" @click.stop.prevent="toggleState(fid)">
                                            <input :id="'toggle' + fid.fiduciaria" type="checkbox" class="toggle-input" 
                                                :checked="Number(fid.is_active) !== 1">
                                            <label class="toggle-label" :for="'toggle' + fid.fiduciaria" style="transform: rotate(180deg);"></label>
                                        </div>
                                    </td>
                                    <td style="text-align: center;">
                                        <span @click.stop.prevent="requestDelete(fid)" class="delete">✖</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div v-if="mode == 1 || mode == 2" style="padding: 1em; height: max-content;" class="pure-g">
                <div class="pure-u-1-24 pure-u-md-1-6"></div>
                <div class="pure-u-22-24 pure-u-md-2-3 menuCard" style="margin: 0em 0em 0.5em 0em;">
                    <h2>{{mode == 1 ? 'Nueva' : 'Editar'}} Fiduciaria</h2>
                    <div class="pure-g">
                        <div class="formInputStandard pure-u-1-2 pure-u-md-16-24">
                            <input type="text" v-model="fiduciaria.fiduciaria" />
                        </div>
                        <div class="formInputStandard pure-u-1-2 pure-u-md-1-5">
                            <button v-on:click="onSave()">Guardar</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Zonas agrupamiento proyectos -->
        <div v-if="mainmode == 8">
            <div style="font-size: 1rem; border-bottom: 1px solid rgb(231, 231, 231); padding: 1rem; ">
                <div style="display: inline;" v-for="(r, i) in ruta.filter(r => r.text)" @click="r.action">
                    <span class="hoverLink">{{ r.text }}</span>
                    <span v-if="i < ruta.length - 1"> / </span>
                </div>
            </div>

            <div v-if="mode == 0" style="padding: 1em">
                <div class="pure-u-1-24 pure-u-md-1-6"></div>
                <div class="pure-u-22-24 pure-u-md-2-3 menuCard">
                    <h2>Zonas agrupamiento proyectos</h2>
                    <div class="searchBox">
                        <div class="pure-g">
                            <div class="pure-u-1-1 pure-u-md-10-24">
                                <input type="text" placeholder="Nombre" v-model="filtros.zonasProyectos['zona_proyecto']"/>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-2-24">
                                <div class="imgGraybutton" @click="onClear('zonasProyectos')">
                                    <img src="./img/ico/eraser.png" />
                                </div>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-3-24">
                                <select v-model="filtros.zonasProyectos['is_active']" class="pure-input-1">
                                    <option value="">[Todos]</option>
                                    <option value="1">Activos</option>
                                    <option value="0">Inactivos</option>
                                </select>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-1-24"></div>
                            <div class="pure-u-1-2 pure-u-md-1-24">
                                <img src="../../img/cli/excel_02.png" alt="Excel" class="pure-img logoExcel"  
                                    @click="exportExcel('zonasProyectos')" title="Descargar datos a Excel" />
                            </div>
                            <div class="pure-u-1-1 pure-u-md-1-24"></div>
                            <div class="pure-u-1-1 pure-u-md-1-4">
                                <button v-on:click="setMode(1)">Nueva Zona</button>
                            </div>
                        </div>
                    </div>
                    <div class="main-content">
                        <table class="dataTable" style="table-layout: auto;" v-if="zonasProyectos && zonasProyectos.length">
                            <thead>
                                <tr>
                                    <th v-for="key in Object.keys(zonasProyectos[0]).filter(k => !k.startsWith('id_') && !k.startsWith('is_') )">
                                        {{key.replaceAll("_"," ")}}
                                    </th>
                                    <th>Activo</th>
                                    <th>Eliminar</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="zap in getFilteredList('zonasProyectos')" @click="onSelect(zap)">
                                    <td v-for="key in Object.keys(zap).filter(k => !k.startsWith('id_') && !k.startsWith('is_') )">
                                        {{zap[key]}}</td>
                                    <td style="text-align: center;">
                                        <div class="toggle-switch" @click.stop.prevent="toggleState(zap)">
                                            <input :id="'toggle' + zap.zona_proyecto" type="checkbox" class="toggle-input" 
                                                :checked="Number(zap.is_active) !== 1">
                                            <label class="toggle-label" :for="'toggle' + zap.zona_proyecto" style="transform: rotate(180deg);"></label>
                                        </div>
                                    </td>
                                    <td style="text-align: center;">
                                        <span @click.stop.prevent="requestDelete(zap)" class="delete">✖</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div v-if="mode == 1 || mode == 2" style="padding: 1em; height: max-content;" class="pure-g">
                <div class="pure-u-1-24 pure-u-md-1-6"></div>
                <div class="pure-u-22-24 pure-u-md-2-3 menuCard" style="margin: 0em 0em 0.5em 0em;">
                    <h2>{{mode == 1 ? 'Nueva' : 'Editar'}} Zona</h2>
                    <div class="pure-g">
                        <div class="formInputStandard pure-u-1-2 pure-u-md-16-24">
                            <input type="text" v-model="zonaProyecto.zona_proyecto" />
                        </div>
                        <div class="formInputStandard pure-u-1-2 pure-u-md-1-5">
                            <button v-on:click="onSave()">Guardar</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ciudadelas -->
        <div v-if="mainmode == 9">
            <div style="font-size: 1rem; border-bottom: 1px solid rgb(231, 231, 231); padding: 1rem; ">
                <div style="display: inline;" v-for="(r, i) in ruta.filter(r => r.text)" @click="r.action">
                    <span class="hoverLink">{{ r.text }}</span>
                    <span v-if="i < ruta.length - 1"> / </span>
                </div>
            </div>

            <div v-if="mode == 0" style="padding: 1em">
                <div class="pure-u-1-24 pure-u-md-1-6"></div>
                <div class="pure-u-22-24 pure-u-md-2-3 menuCard">
                    <h2>Ciudadelas</h2>
                    <div class="searchBox">
                        <div class="pure-g">
                            <div class="pure-u-1-1 pure-u-md-10-24">
                                <input type="text" placeholder="Nombre" v-model="filtros.ciudadelas['ciudadela']"/>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-2-24">
                                <div class="imgGraybutton" @click="onClear('ciudadelas')">
                                    <img src="./img/ico/eraser.png" />
                                </div>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-3-24">
                                <select v-model="filtros.ciudadelas['is_active']" class="pure-input-1">
                                    <option value="">[Todos]</option>
                                    <option value="1">Activos</option>
                                    <option value="0">Inactivos</option>
                                </select>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-1-24"></div>
                            <div class="pure-u-1-2 pure-u-md-1-24">
                                <img src="../../img/cli/excel_02.png" alt="Excel" class="pure-img logoExcel"  
                                    @click="exportExcel('ciudadelas')" title="Descargar datos a Excel" />
                            </div>
                            <div class="pure-u-1-1 pure-u-md-1-24"></div>
                            <div class="pure-u-1-1 pure-u-md-1-4">
                                <button v-on:click="setMode(1)">Nueva Ciudadela</button>
                            </div>
                        </div>
                    </div>
                    <div class="main-content">
                        <table class="dataTable" style="table-layout: auto;" v-if="ciudadelas && ciudadelas.length">
                            <thead>
                                <tr>
                                    <th v-for="key in Object.keys(ciudadelas[0]).filter(k => !k.startsWith('id_') && !k.startsWith('is_') )">
                                        {{key.replaceAll("_"," ")}}
                                    </th>
                                    <th>Activo</th>
                                    <th>Eliminar</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="ciu in getFilteredList('ciudadelas')" @click="onSelect(ciu)">
                                    <td v-for="key in Object.keys(ciu).filter(k => !k.startsWith('id_') && !k.startsWith('is_') )">
                                        {{ciu[key]}}</td>
                                    <td style="text-align: center;">
                                        <div class="toggle-switch" @click.stop.prevent="toggleState(ciu)">
                                            <input :id="'toggle' + ciu.ciudadela" type="checkbox" class="toggle-input" 
                                                :checked="Number(ciu.is_active) !== 1">
                                            <label class="toggle-label" :for="'toggle' + ciu.ciudadela" style="transform: rotate(180deg);"></label>
                                        </div>
                                    </td>
                                    <td style="text-align: center;">
                                        <span @click.stop.prevent="requestDelete(ciu)" class="delete">✖</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div v-if="mode == 1 || mode == 2" style="padding: 1em; height: max-content;" class="pure-g">
                <div class="pure-u-1-24 pure-u-md-1-6"></div>
                <div class="pure-u-22-24 pure-u-md-2-3 menuCard" style="margin: 0em 0em 0.5em 0em;">
                    <h2>{{mode == 1 ? 'Nueva' : 'Editar'}} Ciudadela</h2>
                    <div class="pure-g">
                        <div class="formInputStandard pure-u-1-2 pure-u-md-16-24">
                            <input type="text" v-model="ciudadela.ciudadela" />
                        </div>
                        <div class="formInputStandard pure-u-1-2 pure-u-md-1-5">
                            <button v-on:click="onSave()">Guardar</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Instructivos Consignación y cierre -->
        <div v-if="mainmode == 10">
            <div style="font-size: 1rem; border-bottom: 1px solid rgb(231, 231, 231); padding: 1rem; ">
                <div style="display: inline;" v-for="(r, i) in ruta.filter(r => r.text)" @click="r.action">
                    <span class="hoverLink">{{ r.text }}</span>
                    <span v-if="i < ruta.length - 1"> / </span>
                </div>
            </div>

            <div v-if="mode == 0" style="padding: 1em">
                <div class="pure-u-1-24 pure-u-md-1-6"></div>
                <div class="pure-u-22-24 pure-u-md-2-3 menuCard">
                    <h2>Instructivos Consignación y cierre</h2>
                    <div class="searchBox">
                        <div class="pure-g">
                            <div class="pure-u-1-1 pure-u-md-10-24">
                                <input type="text" placeholder="Nombre" v-model="filtros.instructivos['instructivo']"/>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-2-24">
                                <div class="imgGraybutton" @click="onClear('instructivos')">
                                    <img src="./img/ico/eraser.png" />
                                </div>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-3-24">
                                <select v-model="filtros.instructivos['is_active']" class="pure-input-1">
                                    <option value="">[Todos]</option>
                                    <option value="1">Activos</option>
                                    <option value="0">Inactivos</option>
                                </select>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-1-24"></div>
                            <div class="pure-u-1-2 pure-u-md-1-24">
                                <img src="../../img/cli/excel_02.png" alt="Excel" class="pure-img logoExcel"  
                                    @click="exportExcel('instructivos')" title="Descargar datos a Excel" />
                            </div>
                            <div class="pure-u-1-1 pure-u-md-1-24"></div>
                            <div class="pure-u-1-1 pure-u-md-1-4">
                                <button v-on:click="setMode(1)">Nuevo Instructivo</button>
                            </div>
                        </div>
                    </div>
                    <div class="main-content">
                        <table class="dataTable" style="table-layout: auto;" v-if="instructivos && instructivos.length">
                            <thead>
                                <tr>
                                    <th
                                        v-for="key in Object.keys(instructivos[0]).filter(k => !k.startsWith('id_') && !k.startsWith('is_')  && k != 'procedimiento' && k != 'documentacion_cierre' && k != 'notas')">
                                        {{key.replaceAll("_"," ")}}
                                    </th>
                                    <th>Activo</th>
                                    <th>Eliminar</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="ins in getFilteredList('instructivos')" @click="onSelect(ins)">
                                    <td
                                        v-for="key in Object.keys(ins).filter(k => !k.startsWith('id_') && !k.startsWith('is_')  && k != 'procedimiento' && k != 'documentacion_cierre' && k != 'notas')">
                                        {{ins[key]}}</td>
                                    <td style="text-align: center;">
                                        <div class="toggle-switch" @click.stop.prevent="toggleState(ins)">
                                            <input :id="'toggle' + ins.instructivo" type="checkbox" class="toggle-input" 
                                                :checked="Number(ins.is_active) !== 1">
                                            <label class="toggle-label" :for="'toggle' + ins.instructivo" style="transform: rotate(180deg);"></label>
                                        </div>
                                    </td>
                                    <td style="text-align: center;">
                                        <span @click.stop.prevent="requestDelete(ins)" class="delete">✖</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div v-if="mode == 1 || mode == 2" style="padding: 1em; height: max-content;" class="pure-g">
                <div class="pure-u-1-1 menuCard" style="margin: 0em 0em 0.5em 0em;">
                    <h2>{{mode == 1 ? 'Nuevo' : 'Editar'}} Instructivo</h2>
                    <div class="pure-g">
                        <div class="formInputStandard pure-u-1-2 pure-u-md-1-3">
                            <input type="text" v-model="instructivo.instructivo" />
                        </div>
                        <div class="formInputStandard pure-u-1-2 pure-u-md-1-5"></div>
                    </div>
                    <div class="pure-g tab-container">
                        <div class="tab pure-u-1-3 pure-u-md-1-3" @click="insEditor = 1"
                            v-bind:class="{'tab-selected': insEditor == 1}">
                            Procedimiento
                        </div>
                        <div class="tab pure-u-1-3 pure-u-md-1-3" @click="insEditor = 2"
                            v-bind:class="{'tab-selected': insEditor == 2}">
                            Documentación Cierre
                        </div>
                        <div class="tab pure-u-1-3 pure-u-md-1-3" @click="insEditor = 3"
                            v-bind:class="{'tab-selected': insEditor == 3}">
                            Recomendaciones
                        </div>
                    </div>
                    <div class="pure-g" style="margin-bottom: .5rem;">
                        <div class="pure-u-1-1 pure-u-md-1-1 editor-container"
                            v-bind:class="{'hide-editor': insEditor != 1}">
                            <div id="editor-pro"></div>
                        </div>
                        <div class="pure-u-1-1 pure-u-md-1-1 editor-container"
                            v-bind:class="{'hide-editor': insEditor != 2}">
                            <div id="editor-cie"></div>
                        </div>
                        <div class="pure-u-1-1 pure-u-md-1-1 editor-container"
                            v-bind:class="{'hide-editor': insEditor != 3}">
                            <div id="editor-not"></div>
                        </div>
                    </div>
                    <div class="pure-g">
                        <div class="pure-u-md-2-5"></div>
                        <div class="formInputStandard pure-u-1-2 pure-u-md-1-5">
                            <button v-on:click="onSave()">Guardar</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pies Legales Cotizaciones -->
        <div v-if="mainmode == 11">
            <div style="font-size: 1rem; border-bottom: 1px solid rgb(231, 231, 231); padding: 1rem; ">
                <div style="display: inline;" v-for="(r, i) in ruta.filter(r => r.text)" @click="r.action">
                    <span class="hoverLink">{{ r.text }}</span>
                    <span v-if="i < ruta.length - 1"> / </span>
                </div>
            </div>

            <div v-if="mode == 0" style="padding: 1em">
                <div class="pure-u-1-24 pure-u-md-1-6"></div>
                <div class="pure-u-22-24 pure-u-md-2-3 menuCard">
                    <h2>Pies Legales Cotizaciones</h2>
                    <div class="searchBox">
                        <div class="pure-g">
                            <div class="pure-u-1-1 pure-u-md-10-24">
                                <input type="text" placeholder="Nombre" v-model="filtros.pies_legales['pie_legal']"/>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-2-24">
                                <div class="imgGraybutton" @click="onClear('pies_legales')">
                                    <img src="./img/ico/eraser.png" />
                                </div>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-3-24">
                                <select v-model="filtros.pies_legales['is_active']" class="pure-input-1">
                                    <option value="">[Todos]</option>
                                    <option value="1">Activos</option>
                                    <option value="0">Inactivos</option>
                                </select>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-1-24"></div>
                            <div class="pure-u-1-2 pure-u-md-1-24">
                                <img src="../../img/cli/excel_02.png" alt="Excel" class="pure-img logoExcel"  
                                    @click="exportExcel('pies_legales')" title="Descargar datos a Excel" />
                            </div>
                            <div class="pure-u-1-1 pure-u-md-1-24"></div>
                            <div class="pure-u-1-1 pure-u-md-1-4">
                                <button v-on:click="setMode(1)">Nuevo Pie Legal</button>
                            </div>
                        </div>
                    </div>
                    <div class="main-content">
                        <table class="dataTable" style="table-layout: auto;" v-if="pies_legales && pies_legales.length">
                            <thead>
                                <tr>
                                    <th
                                        v-for="key in Object.keys(pies_legales[0]).filter(k => k != 'texto' && k != 'notas_extra' && !k.startsWith('id_') && !k.startsWith('is_'))">
                                        {{key.replaceAll("_"," ")}}
                                    </th>
                                    <th>Activo</th>
                                    <th>Eliminar</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="pie in getFilteredList('pies_legales')" @click="onSelect(pie)">
                                    <td
                                        v-for="key in Object.keys(pie).filter(k => k != 'texto' && k != 'notas_extra' && !k.startsWith('id_') && !k.startsWith('is_'))">
                                        {{pie[key]}}</td>
                                    <td style="text-align: center;">
                                        <div class="toggle-switch" @click.stop.prevent="toggleState(pie)">
                                            <input :id="'toggle' + pie.pie_legal" type="checkbox" class="toggle-input" 
                                                :checked="Number(pie.is_active) !== 1">
                                            <label class="toggle-label" :for="'toggle' + pie.pie_legal" style="transform: rotate(180deg);"></label>
                                        </div>
                                    </td>
                                    <td style="text-align: center;">
                                        <span @click.stop.prevent="requestDelete(pie)" class="delete">✖</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div v-if="mode == 1 || mode == 2" style="padding: 1em; height: max-content;" class="pure-g">
                <div class="pure-u-1-1 menuCard" style="margin: 0em 0em 0.5em 0em;">
                    <h2>{{mode == 1 ? 'Nuevo' : 'Editar'}} Pie Legal</h2>
                    <div class="pure-g">
                        <div class="formInputStandard pure-u-1-2 pure-u-md-1-3">
                            <input type="text" v-model="pie_legal.pie_legal" />
                        </div>
                    </div>
                    <div class="pure-g tab-container">
                        <div class="tab pure-u-1-2 pure-u-md-1-2" @click="pieEditor = 1"
                            v-bind:class="{'tab-selected': pieEditor == 1}">
                            Pie legal
                        </div>
                        <div class="tab pure-u-1-2 pure-u-md-1-2" @click="pieEditor = 2"
                            v-bind:class="{'tab-selected': pieEditor == 2}">
                            Notas Extra
                        </div>
                    </div>
                    <div class="pure-g" style="margin-bottom: .5rem;">
                        <div class="pure-u-1-1 pure-u-md-1-1 editor-container"
                            v-bind:class="{'hide-editor': pieEditor != 1}">
                            <div id="editor-tex"></div>
                        </div>
                        <div class="pure-u-1-1 pure-u-md-1-1 editor-container"
                            v-bind:class="{'hide-editor': pieEditor != 2}">
                            <div id="editor-not"></div>
                        </div>
                    </div>
                    <div class="pure-g">
                        <div class="pure-u-md-2-5"></div>
                        <div class="formInputStandard pure-u-1-2 pure-u-md-1-5">
                            <button v-on:click="onSave()">Guardar</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Trámites -->
        <div v-if="mainmode == 12">
            <div style="font-size: 1rem; border-bottom: 1px solid rgb(231, 231, 231); padding: 1rem; ">
                <div style="display: inline;" v-for="(r, i) in ruta.filter(r => r.text)" @click="r.action">
                    <span class="hoverLink">{{ r.text }}</span>
                    <span v-if="i < ruta.length - 1"> / </span>
                </div>
            </div>

            <div v-if="mode == 0" style="padding: 1em">
                <div class="pure-u-1-24 pure-u-md-1-6"></div>
                <div class="pure-u-22-24 pure-u-md-2-3 menuCard">
                    <h2>Trámites</h2>
                    <div class="searchBox">
                        <div class="pure-g">
                            <div class="pure-u-1-1 pure-u-md-10-24">
                                <input type="text" placeholder="Nombre" v-model="filtros.tramites['tramite']"/>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-2-24">
                                <div class="imgGraybutton" @click="onClear('tramites')">
                                    <img src="./img/ico/eraser.png" />
                                </div>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-3-24">
                                <select v-model="filtros.tramites['is_active']" class="pure-input-1">
                                    <option value="">[Todos]</option>
                                    <option value="1">Activos</option>
                                    <option value="0">Inactivos</option>
                                </select>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-1-24"></div>
                            <div class="pure-u-1-2 pure-u-md-1-24">
                                <img src="../../img/cli/excel_02.png" alt="Excel" class="pure-img logoExcel"  
                                    @click="exportExcel('tramites')" title="Descargar datos a Excel" />
                            </div>
                            <div class="pure-u-1-1 pure-u-md-1-24"></div>
                            <div class="pure-u-1-1 pure-u-md-1-4">
                                <button v-on:click="setMode(1)">Nuevo Trámite</button>
                            </div>
                        </div>
                    </div>
                    <div class="main-content">
                        <table class="dataTable" style="table-layout: auto;" v-if="tramites && tramites.length">
                            <thead>
                                <tr>
                                    <th v-for="key in Object.keys(tramites[0]).filter(k => k != 'texto' && !k.startsWith('id_') && !k.startsWith('is_'))">
                                        {{key.replaceAll("_"," ")}}
                                    </th>
                                    <th>Activo</th>
                                    <th>Eliminar</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="tra in getFilteredList('tramites')" @click="onSelect(tra)">
                                    <td v-for="key in Object.keys(tra).filter(k => k != 'texto' && !k.startsWith('id_') && !k.startsWith('is_'))">
                                        {{tra[key]}}</td>
                                    <td style="text-align: center;">
                                        <div class="toggle-switch" @click.stop.prevent="toggleState(tra)">
                                            <input :id="'toggle' + tra.tramite" type="checkbox" class="toggle-input" 
                                                :checked="Number(tra.is_active) !== 1">
                                            <label class="toggle-label" :for="'toggle' + tra.tramite" style="transform: rotate(180deg);"></label>
                                        </div>
                                    </td>
                                    <td style="text-align: center;">
                                        <span @click.stop.prevent="requestDelete(tra)" class="delete">✖</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div v-if="mode == 1 || mode == 2" style="padding: 1em; height: max-content;" class="pure-g">
                <div class="pure-u-1-1 menuCard" style="margin: 0em 0em 0.5em 0em;">
                    <h2>{{mode == 1 ? 'Nuevo' : 'Editar'}} Trámite</h2>
                    <div class="pure-g">
                        <div class="formInputStandard pure-u-1-2 pure-u-md-1-3">
                            <input type="text" v-model="tramite.tramite" />
                        </div>
                    </div>
                    <div class="pure-g tab-container">
                        <div class="tab pure-u-1-1 pure-u-md-1-1" @click="traEditor = 1"
                            v-bind:class="{'tab-selected': traEditor == 1}">
                            Trámite
                        </div>
                    </div>
                    <div class="pure-g" style="margin-bottom: .5rem;">
                        <div class="pure-u-1-1 pure-u-md-1-1 editor-container"
                            v-bind:class="{'hide-editor': pieEditor != 1}">
                            <div id="editor-tex"></div>
                        </div>
                    </div>
                    <div class="pure-g">
                        <div class="pure-u-md-2-5"></div>
                        <div class="formInputStandard pure-u-1-2 pure-u-md-1-5">
                            <button v-on:click="onSave()">Guardar</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Documentos -->
        <div v-if="mainmode == 13">
            <div style="font-size: 1rem; border-bottom: 1px solid rgb(231, 231, 231); padding: 1rem; ">
                <div style="display: inline;" v-for="(r, i) in ruta.filter(r => r.text)" @click="r.action">
                    <span class="hoverLink">{{ r.text }}</span>
                    <span v-if="i < ruta.length - 1"> / </span>
                </div>
            </div>

            <div v-if="mode == 0" style="padding: 1em">
                <div class="pure-u-1-24 pure-u-md-1-6"></div>
                <div class="pure-u-22-24 pure-u-md-2-3 menuCard">
                    <h2>Otros Documentos</h2>
                    <div class="searchBox">
                        <div class="pure-g">
                            <div class="pure-u-1-1 pure-u-md-10-24">
                                <input type="text" placeholder="Nombre" v-model="filtros.documentos['documento']"/>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-2-24">
                                <div class="imgGraybutton" @click="onClear('documentos')">
                                    <img src="./img/ico/eraser.png" />
                                </div>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-3-24">
                                <select v-model="filtros.documentos['is_active']" class="pure-input-1">
                                    <option value="">[Todos]</option>
                                    <option value="1">Activos</option>
                                    <option value="0">Inactivos</option>
                                </select>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-1-24"></div>
                            <div class="pure-u-1-2 pure-u-md-1-24">
                                <img src="../../img/cli/excel_02.png" alt="Excel" class="pure-img logoExcel"  
                                    @click="exportExcel('documentos')" title="Descargar datos a Excel" />
                            </div>
                            <div class="pure-u-1-1 pure-u-md-1-24"></div>
                            <div class="pure-u-1-1 pure-u-md-1-4">
                                <button v-on:click="clearAllImages();setMode(1)">Agregar</button>
                            </div>
                        </div>
                    </div>
                    <div class="main-content">
                        <table class="dataTable" style="table-layout: auto;" v-if="documentos && documentos.length">
                            <thead>
                                <tr>
                                    <th v-for="key in Object.keys(documentos[0]).filter(k => !k.startsWith('id_') && !k.startsWith('is_'))">
                                        {{key.replaceAll("_"," ")}}
                                    </th>
                                    <th>Activo</th>
                                    <th>Eliminar</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="doc in getFilteredList('documentos')" @click="onSelectDocument(doc)">
                                    <td v-for="key in Object.keys(doc).filter(k => !k.startsWith('id_') && !k.startsWith('is_'))">
                                        {{doc[key]}}</td>
                                    <td style="text-align: center;">
                                        <div class="toggle-switch" @click.stop.prevent="toggleState(doc)">
                                            <input :id="'toggle' + doc.documento" type="checkbox" class="toggle-input" 
                                                :checked="Number(doc.is_active) !== 1">
                                            <label class="toggle-label" :for="'toggle' + doc.documento" style="transform: rotate(180deg);"></label>
                                        </div>
                                    </td>
                                    <td style="text-align: center;">
                                        <span @click.stop.prevent="requestDelete(doc)" class="delete">✖</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div v-if="mode == 1 || mode == 2" style="padding: 1em; height: max-content;" class="pure-g">
                <div class='pure-u-1-1 pure-u-md-1-1 formDivision' style="font-size: 1.5em; margin-bottom:4px">
                    Archivos
                </div>
                <div class='pure-u-1-1 pure-u-md-1-24 positTex'>
                    <img class="pure-img logoExcel" src="../../img/ico/svg/delete.svg" @click="clearAllImages" alt="">
                </div>
                <div class='pure-u-1-1 pure-u-md-1-6 positTex'>
                    Nombre
                </div>
                <div class='pure-u-1-1 pure-u-md-1-5 positTex'>
                    <input type="text" v-model="documento.documento" @keyup="validarNombre" />
                </div>
                <div class='pure-u-1-1 pure-u-md-1-24'></div>
                <div class='pure-u-1-1 pure-u-md-1-6 positTex'>
                    <button v-on:click="onSaveDocument()">Guardar</button>
                </div>
                <div class="pure-u-1" @mousemove="updateCursor" @mouseleave="tooltipVisible = false"
                    style="position: relative;padding-top: 1em;">
                    <label for="file-input" class="preview-container" style="height: calc(100vh - 17rem); cursor: pointer; max-height: 100%;"
                        @dragover.prevent="handleDragOver" @drop.prevent="handleDrop" @mouseenter="tooltipVisible = true"
                        @mouseleave="tooltipVisible = false">
                        <div v-if="previews.length === 0" class="center-absolute ">
                            Arrastra o haz clic para cargar archivos.
                        </div>
                        <div class="image-card" v-for="(item, index) in previews" :key="index" draggable="true"
                            @dragstart="dragStart(index)"
                            @mouseenter="tooltipVisible = false" @mouseleave="tooltipVisible = true"
                            style="position: relative;">
                            <img :src="item.src" @click.stop.prevent="" 
                                @mouseenter="tooltipVisible = true; tooltipMsg = item.file.name"
                                @mouseleave="tooltipVisible = false; tooltipMsg = 'Arrastra o haz clic para cargar archivos.'"/>
                            <div class="image-name-overlay">{{ item.file.name }}</div>
                            <div class="download-btn">
                                <a :href="getURLFile(item.file)" :download="item.file.name">
                                    <img src="../../img/ico/download.jpg">
                                </a>
                            </div>
                            <div class="delete-btn" @click.stop.prevent="removeImage(index)">✖</div>
                        </div>
                        <div v-if="tooltipVisible" class="cursor-tooltip" :style="{ top: tooltipY + 'px', left: tooltipX + 'px' }">
                            {{tooltipMsg}}
                        </div>
                    </label>
                    <input type="file" id="file-input" class="hidden-input" style="display: none;" multiple accept="*"
                        @change="handleFileChange" ref="fileInput" />
                </div>
            </div>
        </div>

        <!-- Subsidios VIS -->
        <div v-if="mainmode == 14">
            <div style="font-size: 1rem; border-bottom: 1px solid rgb(231, 231, 231); padding: 1rem; ">
                <div style="display: inline;" v-for="(r, i) in ruta.filter(r => r.text)" @click="r.action">
                    <span class="hoverLink">{{ r.text }}</span>
                    <span v-if="i < ruta.length - 1"> / </span>
                </div>
            </div>

            <div v-if="mode == 0" style="padding: 1em">
                <div class="pure-u-1-24 pure-u-md-1-8"></div>
                <div class="pure-u-22-24 pure-u-md-3-4 menuCard">
                    <h2>Subsidios VIS</h2>
                    <div class="searchBox">
                        <div class="pure-g">
                            <div class="pure-u-1-1 pure-u-md-10-24">
                                <input type="text" placeholder="Periodo" v-model="filtros.subsidios['periodo']"/>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-2-24">
                                <div class="imgGraybutton" @click="onClear('subsidios')">
                                    <img src="./img/ico/eraser.png" />
                                </div>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-3-24">
                                <select v-model="filtros.subsidios['is_active']" class="pure-input-1">
                                    <option value="">[Todos]</option>
                                    <option value="1">Activos</option>
                                    <option value="0">Inactivos</option>
                                </select>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-1-24"></div>
                            <div class="pure-u-1-2 pure-u-md-1-24">
                                <img src="../../img/cli/excel_02.png" alt="Excel" class="pure-img logoExcel"  
                                    @click="exportExcel('subsidios')" title="Descargar datos a Excel" />
                            </div>
                            <div class="pure-u-1-1 pure-u-md-1-24"></div>
                            <div class="pure-u-1-1 pure-u-md-1-4">
                                <button v-on:click="setMode(1)">Nuevo Periodo</button>
                            </div>
                        </div>
                    </div>
                    <div class="main-content">
                        <table class="dataTable" style="table-layout: auto;" v-if="subsidios && subsidios.length">
                            <thead>
                                <tr>
                                    <th>periodo</th>
                                    <th>smmlv</th>
                                    <th>subsidio entre 0-2 smmlv</th>
                                    <th>subsidio entre 2-4 smmlv</th>
                                    <th>Activo</th>
                                    <th>Eliminar</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="sub in getFilteredList('subsidios')" @click="onSelect(sub)">
                                    <td v-for="key in Object.keys(sub).filter(k => k != 'imagen' && !k.startsWith('id_') && !k.startsWith('is_'))"
                                        :style="key.startsWith('smmlv') ? 'text-align: right;' : ''">
                                        {{key.startsWith('smmlv') ? formatNumber(sub[key].replace(',','.')) : sub[key]}}</td>
                                    <td style="text-align: center;">
                                        <div class="toggle-switch" @click.stop.prevent="toggleState(sub)">
                                            <input :id="'toggle' + sub.subsidio" type="checkbox" class="toggle-input" 
                                                :checked="Number(sub.is_active) !== 1">
                                            <label class="toggle-label" :for="'toggle' + sub.subsidio" style="transform: rotate(180deg);"></label>
                                        </div>
                                    </td>
                                    <td style="text-align: center;">
                                        <span @click.stop.prevent="requestDelete(sub)" class="delete">✖</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div v-if="mode == 1 || mode == 2" style="padding: 1em; height: calc(100vh - 17rem);" class="pure-g">
                <div class="pure-u-1-1 menuCard" style="margin: 0em 0em 0.5em 0em;">
                    <h2>{{mode == 1 ? 'Nuevo' : 'Editar'}} Subsidio VIS</h2>
                    <div class="pure-g">
                        <div class="pure-u-1-1 pure-u-md-1-3">
                            <div class="formInputStandard">
                                <span>Periodo (año)</span>
                                <input type="text" v-model="subsidio.periodo" style="font-size: 1rem;"/>
                            </div>
                            <div class="formInputStandard">
                                <span>Valor smmlv</span>
                                <input type="text" v-model="f_smmlv" style="font-size: 1rem;" @keyup="validarFormato"/>
                            </div>
                            <div class="formInputStandard">
                                <span>Subsidio entre 0 y 2 smmlv</span>
                                <input type="text" v-model="f_smmlv_0_2" style="font-size: 1rem;" @keyup="validarFormato"/>
                            </div>
                            <div class="formInputStandard">
                                <span>Subsidio entre 2 y 4 smmlv</span>
                                <input type="text" v-model="f_smmlv_2_4" style="font-size: 1rem;" @keyup="validarFormato"/>
                            </div>
                        </div>
                        <div class="pure-u-1-1 pure-u-md-2-3">
                            <div class="formInputStandard" style="height: 100%;">
                                <span>Imagen</span>
                                <div v-if="subsidio.imagen">
                                    <img :src="subsidio.imagen.startsWith('blob:') ? subsidio.imagen : '/file/S3get/' + subsidio.imagen" 
                                        style="max-width: 100%; max-height: calc(100vh - 21rem);
                                        display: block; margin: 0 auto; border: 1px solid #ccc;" alt="imagen">
                                    <div style="margin-top: 1rem;">
                                        <label for="sub-image" class="file" style="text-align: center;">Subir Imagen</label>
                                        <input id="sub-image" type="file" @change="fileUpload" style="display: none;" />
                                    </div>
                                </div>
                                <div v-else style="height: 100%;">
                                    <label for="sub-image" class="image-drag" draggable="true" 
                                        @dragover.prevent="handleDragOver" @drop.prevent="handleSubDrop">
                                        <span>Arrastra una imagen o haz clic</span>
                                    </label>
                                    <input id="sub-image" type="file" @change="fileUpload" style="display: none;" accept="image/*"/>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="pure-g">
                        <div class="formInputStandard pure-u-1-2 pure-u-md-1-5">
                            <button v-on:click="onSaveSubsidio()">Guardar</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tipos Financiación -->
        <div v-if="mainmode == 15">
            <div style="font-size: 1rem; border-bottom: 1px solid rgb(231, 231, 231); padding: 1rem; ">
                <div style="display: inline;" v-for="(r, i) in ruta.filter(r => r.text)" @click="r.action">
                    <span class="hoverLink">{{ r.text }}</span>
                    <span v-if="i < ruta.length - 1"> / </span>
                </div>
            </div>

            <div v-if="mode == 0" style="padding: 1em">
                <div class="pure-u-1-24 pure-u-md-1-6"></div>
                <div class="pure-u-22-24 pure-u-md-2-3 menuCard">
                    <h2>Tipos de Financiación</h2>
                    <div class="searchBox">
                        <div class="pure-g">
                            <div class="pure-u-1-1 pure-u-md-10-24">
                                <input type="text" placeholder="Nombre" v-model="filtros.tipos_financiacion['tipo_financiacion']"/>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-2-24">
                                <div class="imgGraybutton" @click="onClear('tipos_financiacion')">
                                    <img src="./img/ico/eraser.png" />
                                </div>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-3-24">
                                <select v-model="filtros.tipos_financiacion['is_active']" class="pure-input-1">
                                    <option value="">[Todos]</option>
                                    <option value="1">Activos</option>
                                    <option value="0">Inactivos</option>
                                </select>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-1-24"></div>
                            <div class="pure-u-1-2 pure-u-md-1-24">
                                <img src="../../img/cli/excel_02.png" alt="Excel" class="pure-img logoExcel"  
                                    @click="exportExcel('tipos_financiacion')" title="Descargar datos a Excel" />
                            </div>
                            <div class="pure-u-1-1 pure-u-md-1-24"></div>
                            <div class="pure-u-1-1 pure-u-md-1-4">
                                <button v-on:click="setMode(1)">Nuevo Tipo</button>
                            </div>
                        </div>
                    </div>
                    <div class="main-content">
                        <table class="dataTable" style="table-layout: auto;" v-if="tipos_financiacion && tipos_financiacion.length">
                            <thead>
                                <tr>
                                    <th v-for="key in Object.keys(tipos_financiacion[0]).filter(k => !k.startsWith('id_') && !k.startsWith('is_') )">
                                        {{key.replaceAll("_"," ")}}
                                    </th>
                                    <th>Activo</th>
                                    <th>Eliminar</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="tf in getFilteredList('tipos_financiacion')" @click="onSelect(tf)">
                                    <td v-for="key in Object.keys(tf).filter(k => !k.startsWith('id_') && !k.startsWith('is_') )">
                                        {{tf[key]}}</td>
                                    <td style="text-align: center;">
                                        <div class="toggle-switch" @click.stop.prevent="toggleState(tf)">
                                            <input :id="'toggle' + tf.tipo_financiacion" type="checkbox" class="toggle-input" 
                                                :checked="Number(tf.is_active) !== 1">
                                            <label class="toggle-label" :for="'toggle' + tf.tipo_financiacion" style="transform: rotate(180deg);"></label>
                                        </div>
                                    </td>
                                    <td style="text-align: center;">
                                        <span @click.stop.prevent="requestDelete(tf)" class="delete">✖</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div v-if="mode == 1 || mode == 2" style="padding: 1em; height: max-content;" class="pure-g">
                <div class="pure-u-1-24 pure-u-md-1-6"></div>
                <div class="pure-u-22-24 pure-u-md-2-3 menuCard" style="margin: 0em 0em 0.5em 0em;">
                    <h2>{{mode == 1 ? 'Nuevo' : 'Editar'}} Tipo Financiación</h2>
                    <div class="pure-g">
                        <div class="formInputStandard pure-u-1-2 pure-u-md-16-24">
                            <input type="text" v-model="tipo_financiacion.tipo_financiacion" />
                        </div>
                        <div class="formInputStandard pure-u-1-2 pure-u-md-1-5">
                            <button v-on:click="onSave()">Guardar</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tipo Unidades y Ventas -->
        <div v-if="mainmode == 16">
            <div style="font-size: 1rem; border-bottom: 1px solid rgb(231, 231, 231); padding: 1rem; ">
                <div style="display: inline;" v-for="(r, i) in ruta.filter(r => r.text)" @click="r.action">
                    <span class="hoverLink">{{ r.text }}</span>
                    <span v-if="i < ruta.length - 1"> / </span>
                </div>
            </div>

            <div v-if="mode == 0" style="padding: 1em">
                <div class="pure-u-1-24 pure-u-md-1-6"></div>
                <div class="pure-u-22-24 pure-u-md-2-3 menuCard">
                    <h2>Tipo Unidades y Ventas</h2>
                    <div class="searchBox">
                        <div class="pure-g">
                            <div class="pure-u-1-1 pure-u-md-10-24">
                                <input type="text" placeholder="Nombre" v-model="filtros.tipos_proyecto['tipo_proyecto']"/>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-2-24">
                                <div class="imgGraybutton" @click="onClear('tipos_proyecto')">
                                    <img src="./img/ico/eraser.png" />
                                </div>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-3-24">
                                <select v-model="filtros.tipos_proyecto['is_active']" class="pure-input-1">
                                    <option value="">[Todos]</option>
                                    <option value="1">Activos</option>
                                    <option value="0">Inactivos</option>
                                </select>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-1-24"></div>
                            <div class="pure-u-1-2 pure-u-md-1-24">
                                <img src="../../img/cli/excel_02.png" alt="Excel" class="pure-img logoExcel"  
                                    @click="exportExcel('tipos_proyecto')" title="Descargar datos a Excel" />
                            </div>
                            <div class="pure-u-1-1 pure-u-md-1-24"></div>
                            <div class="pure-u-1-1 pure-u-md-1-4">
                                <button v-on:click="setMode(1)">Nuevo Tipo</button>
                            </div>
                        </div>
                    </div>
                    <div class="main-content">
                        <table class="dataTable" style="table-layout: auto;" v-if="tipos_proyecto && tipos_proyecto.length">
                            <thead>
                                <tr>
                                    <th v-for="key in Object.keys(tipos_proyecto[0]).filter(k => !k.startsWith('id_') && !k.startsWith('is_') )">
                                        {{key.replaceAll("_"," ")}}
                                    </th>
                                    <th>Activo</th>
                                    <th>Eliminar</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="tpr in getFilteredList('tipos_proyecto')" @click="onSelect(tpr)">
                                    <td v-for="key in Object.keys(tpr).filter(k => !k.startsWith('id_') && !k.startsWith('is_') )">
                                        {{tpr[key]}}</td>
                                    <td style="text-align: center;">
                                        <div class="toggle-switch" @click.stop.prevent="toggleState(tpr)">
                                            <input :id="'toggle' + tpr.tipo_proyecto" type="checkbox" class="toggle-input" 
                                                :checked="Number(tpr.is_active) !== 1">
                                            <label class="toggle-label" :for="'toggle' + tpr.tipo_proyecto" style="transform: rotate(180deg);"></label>
                                        </div>
                                    </td>
                                    <td style="text-align: center;">
                                        <span @click.stop.prevent="requestDelete(tpr)" class="delete">✖</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div v-if="mode == 1 || mode == 2" style="padding: 1em; height: max-content;" class="pure-g">
                <div class="pure-u-1-24 pure-u-md-1-6"></div>
                <div class="pure-u-22-24 pure-u-md-2-3 menuCard" style="margin: 0em 0em 0.5em 0em;">
                    <h2>{{mode == 1 ? 'Nuevo' : 'Editar'}} Tipo Proyecto</h2>
                    <div class="pure-g">
                        <div class="formInputStandard pure-u-1-2 pure-u-md-16-24">
                            <input type="text" v-model="tipo_proyecto.tipo_proyecto" />
                        </div>
                        <div class="formInputStandard pure-u-1-2 pure-u-md-1-5">
                            <button v-on:click="onSave()">Guardar</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Estados Proyecto -->
        <div v-if="mainmode == 17">
            <div style="font-size: 1rem; border-bottom: 1px solid rgb(231, 231, 231); padding: 1rem; ">
                <div style="display: inline;" v-for="(r, i) in ruta.filter(r => r.text)" @click="r.action">
                    <span class="hoverLink">{{ r.text }}</span>
                    <span v-if="i < ruta.length - 1"> / </span>
                </div>
            </div>

            <div v-if="mode == 0" style="padding: 1em">
                <div class="pure-u-1-24 pure-u-md-1-6"></div>
                <div class="pure-u-22-24 pure-u-md-2-3 menuCard">
                    <h2>Estados de Proyecto</h2>
                    <div class="searchBox">
                        <div class="pure-g">
                            <div class="pure-u-1-1 pure-u-md-10-24">
                                <input type="text" placeholder="Nombre" v-model="filtros.estados_proyecto['estado_publicacion']"/>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-2-24">
                                <div class="imgGraybutton" @click="onClear('estados_proyecto')">
                                    <img src="./img/ico/eraser.png" />
                                </div>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-3-24">
                                <select v-model="filtros.estados_proyecto['is_active']" class="pure-input-1">
                                    <option value="">[Todos]</option>
                                    <option value="1">Activos</option>
                                    <option value="0">Inactivos</option>
                                </select>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-1-24"></div>
                            <div class="pure-u-1-2 pure-u-md-1-24">
                                <img src="../../img/cli/excel_02.png" alt="Excel" class="pure-img logoExcel"  
                                    @click="exportExcel('estados_proyecto')" title="Descargar datos a Excel" />
                            </div>
                            <div class="pure-u-1-1 pure-u-md-1-24"></div>
                            <div class="pure-u-1-1 pure-u-md-1-4">
                                <button v-on:click="setMode(1)">Nuevo Estado</button>
                            </div>
                        </div>
                    </div>
                    <div class="main-content">
                        <table class="dataTable" style="table-layout: auto;" v-if="estados_proyecto && estados_proyecto.length">
                            <thead>
                                <tr>
                                    <th v-for="key in Object.keys(estados_proyecto[0]).filter(k => !k.startsWith('id_') && !k.startsWith('is_') )">
                                        {{key.replaceAll("_"," ")}}
                                    </th>
                                    <th>Activo</th>
                                    <th>Eliminar</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="epr in getFilteredList('estados_proyecto')" @click="onSelect(epr)">
                                    <td v-for="key in Object.keys(epr).filter(k => !k.startsWith('id_') && !k.startsWith('is_') )">
                                        {{epr[key]}}</td>
                                    <td style="text-align: center;">
                                        <div class="toggle-switch" @click.stop.prevent="toggleState(epr)">
                                            <input :id="'toggle' + epr.estado_proyecto" type="checkbox" class="toggle-input" 
                                                :checked="Number(epr.is_active) !== 1">
                                            <label class="toggle-label" :for="'toggle' + epr.estado_proyecto" style="transform: rotate(180deg);"></label>
                                        </div>
                                    </td>
                                    <td style="text-align: center;">
                                        <span @click.stop.prevent="requestDelete(epr)" class="delete">✖</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div v-if="mode == 1 || mode == 2" style="padding: 1em; height: max-content;" class="pure-g">
                <div class="pure-u-1-24 pure-u-md-1-6"></div>
                <div class="pure-u-22-24 pure-u-md-2-3 menuCard" style="margin: 0em 0em 0.5em 0em;">
                    <h2>{{mode == 1 ? 'Nuevo' : 'Editar'}} Estado Proyecto</h2>
                    <div class="pure-g">
                        <div class="formInputStandard pure-u-1-2 pure-u-md-16-24">
                            <input type="text" v-model="estado_proyecto.estado_publicacion" />
                        </div>
                        <div class="formInputStandard pure-u-1-2 pure-u-md-1-5">
                            <button v-on:click="onSave()">Guardar</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tipologías VIS -->
        <div v-if="mainmode == 18">
            <div style="font-size: 1rem; border-bottom: 1px solid rgb(231, 231, 231); padding: 1rem; ">
                <div style="display: inline;" v-for="(r, i) in ruta.filter(r => r.text)" @click="r.action">
                    <span class="hoverLink">{{ r.text }}</span>
                    <span v-if="i < ruta.length - 1"> / </span>
                </div>
            </div>

            <div v-if="mode == 0" style="padding: 1em">
                <div class="pure-u-1-24 pure-u-md-1-6"></div>
                <div class="pure-u-22-24 pure-u-md-2-3 menuCard">
                    <h2>Tipologías de Proyecto</h2>
                    <div class="searchBox">
                        <div class="pure-g">
                            <div class="pure-u-1-1 pure-u-md-10-24">
                                <input type="text" placeholder="Nombre" v-model="filtros.tipos_vis['tipo_vis']"/>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-2-24">
                                <div class="imgGraybutton" @click="onClear('tipos_vis')">
                                    <img src="./img/ico/eraser.png" />
                                </div>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-3-24">
                                <select v-model="filtros.tipos_vis['is_active']" class="pure-input-1">
                                    <option value="">[Todos]</option>
                                    <option value="1">Activos</option>
                                    <option value="0">Inactivos</option>
                                </select>
                            </div>
                            <div class="pure-u-1-1 pure-u-md-1-24"></div>
                            <div class="pure-u-1-2 pure-u-md-1-24">
                                <img src="../../img/cli/excel_02.png" alt="Excel" class="pure-img logoExcel"  
                                    @click="exportExcel('tipos_vis')" title="Descargar datos a Excel" />
                            </div>
                            <div class="pure-u-1-1 pure-u-md-1-24"></div>
                            <div class="pure-u-1-1 pure-u-md-1-4">
                                <button v-on:click="setMode(1)">Nueva Tipología</button>
                            </div>
                        </div>
                    </div>
                    <div class="main-content">
                        <table class="dataTable" style="table-layout: auto;" v-if="tipos_vis && tipos_vis.length">
                            <thead>
                                <tr>
                                    <th v-for="key in Object.keys(tipos_vis[0]).filter(k => !k.startsWith('id_') && !k.startsWith('is_') )">
                                        {{key.replaceAll("_"," ")}}
                                    </th>
                                    <th>Activo</th>
                                    <th>Eliminar</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="vis in getFilteredList('tipos_vis')" @click="onSelect(vis)">
                                    <td v-for="key in Object.keys(vis).filter(k => !k.startsWith('id_') && !k.startsWith('is_') )">
                                        {{vis[key]}}</td>
                                    <td style="text-align: center;">
                                        <div class="toggle-switch" @click.stop.prevent="toggleState(vis)">
                                            <input :id="'toggle' + vis.tipo_vis" type="checkbox" class="toggle-input" 
                                                :checked="Number(vis.is_active) !== 1">
                                            <label class="toggle-label" :for="'toggle' + vis.tipo_vis" style="transform: rotate(180deg);"></label>
                                        </div>
                                    </td>
                                    <td style="text-align: center;">
                                        <span @click.stop.prevent="requestDelete(vis)" class="delete">✖</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div v-if="mode == 1 || mode == 2" style="padding: 1em; height: max-content;" class="pure-g">
                <div class="pure-u-1-24 pure-u-md-1-6"></div>
                <div class="pure-u-22-24 pure-u-md-2-3 menuCard" style="margin: 0em 0em 0.5em 0em;">
                    <h2>{{mode == 1 ? 'Nuevo' : 'Editar'}} Tipología Proyecto</h2>
                    <div class="pure-g">
                        <div class="formInputStandard pure-u-1-2 pure-u-md-16-24">
                            <input type="text" v-model="tipo_vis.tipo_vis" />
                        </div>
                        <div class="formInputStandard pure-u-1-2 pure-u-md-1-5">
                            <button v-on:click="onSave()">Guardar</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Emails Receptores -->
        <div v-if="mainmode == 19">
            <div style="font-size: 1rem; border-bottom: 1px solid rgb(231, 231, 231); padding: 1rem; ">
                <div style="display: inline;" v-for="(r, i) in ruta.filter(r => r.text)" @click="r.action">
                    <span class="hoverLink">{{ r.text }}</span>
                    <span v-if="i < ruta.length - 1"> / </span>
                </div>
            </div>

            <div v-if="mode == 0 || mode == 1">{{setMode(2)}}</div>

            <div v-if="mode == 2" style="padding: 1em">
                <div class="pure-u-1-24 pure-u-md-1-8"></div>
                <div class="pure-u-22-24 pure-u-md-3-4 menuCard" style="margin: 0em 0em 0.5em 0em;">
                    <h2>Editar Emails Receptores</h2>
                    <div class="pure-g">
                        <div class="pure-u-1-2 pure-u-md-11-24" v-for="email in emails">
                            <div class="formInputStandard pure-u-md-22-24">
                                <label>Email {{email.id_email}}</label>
                                <input type="text" v-model="email.email" 
                                    v-bind:class="{'errorInput': !isEmail(email.email)}" />
                            </div>
                            <div class="pure-u-1-12"></div>
                        </div>
                    </div>
                    <div class="formInputStandard pure-u-1-2 pure-u-md-1-5" style="margin-top: 1rem;">
                        <button v-on:click="onUpdateEmail()">Guardar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>