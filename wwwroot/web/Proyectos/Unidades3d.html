<div class="pure-u-1-24" ></div>
<div class="pure-u-22-24 menuCard" style="height: calc(100vh  - 8rem); overflow-y: auto; margin-top: 1em;">
    <!-- Carga del archivo -->
    <div v-show="mode == 0" style="text-align: center;">
        Actualmente no hay unidades cargadas
        <br/>
        <br/>
        <button v-on:click="openFileDialog()">Cargar unidades desde CSV</button>
    </div>
    <!-- Vista previa -->
     <div v-show="mode == 1" >
        <div style="height: calc(100vh - 13rem); width: 100%; overflow: auto;">
            <table class="dataTable" style="table-layout: auto;">
                <thead>
                    <tr>
                        <th v-for="(item, key) in preview[0]">{{key}}</th>
                    </tr>
                </thead>
                <tbody>
                    <tr v-for="item in preview">
                        <td v-for="(sitem, key) in item">{{item[key]}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div style="text-align: center;">
            <table style="margin: 0px auto;">
                <tbody>
                    <tr>
                        <td style="text-align: left;">Total torres</td>
                        <td style="font-weight: bold;">{{stats.torres}}</td>
                        <td rowspan="2" style="padding: 0rem 2rem;">
                            <button v-on:click="computeViews()">Continuar</button>
                        </td>
                    </tr>
                    <tr>
                        <td style="text-align: left;">Total unidades</td>
                        <td style="font-weight: bold;">{{stats.unidades}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div v-show="mode == 3" class="pure-g" style="height: 100%;">
        <div class="pure-u-1-4" >
            <div>
                <div class='formInputStandard'>
                    <span>Tipo Visualizacion</span><br/>
                    <label><input type='radio' name="viewType" v-model='viewProperties.viewType' value="3d" />3D</label>
                    <label><input type='radio' name="viewType" v-model='viewProperties.viewType' value="classic" />Clasica</label>
                </div>
            </div>
            <div v-show="viewProperties.viewType == '3d'">
                <div class='formInputStandard'>
                    <span>Filas</span>
                    <input type='number' v-model='viewProperties.rows' />
                </div>
                <div class='formInputStandard'>
                        <span>Columnas</span>
                    <input type='number' v-model='viewProperties.cols' />
                </div>
                <div class='formInputStandard'>
                        <span>Torres por fila</span>
                    <input type='number' v-model='viewProperties.megarows' />
                </div>
                <div style="text-align: center;">
                    <button v-on:click="addCube()">Vista previa</button>
                </div>
            </div>
            <div v-show="viewProperties.viewType == 'classic'">
                <div class='formInputStandard'>
                    <span>Columnas (Torre)</span>
                    <input type='number' v-model='viewProperties.cols' />
                </div>
                <div class='formInputStandard'>
                    <span>Columnas (Piso)</span>
                    <input type='number' v-model='viewProperties.rows' />
                </div>
                <div style="text-align: center;">
                    <button v-on:click="classicView()">Vista previa</button>
                </div>
            </div>
        </div>
        <div v-if="viewProperties.viewType == '3d'" class="pure-u-3-4 pure-g">
            <div class="pure-u-1-4" style="height: calc(100vh - 13rem); overflow: auto;">
                <div v-for="titem in torres">
                    <div class="hoverRow" style="padding: 0.2rem 0.5rem;" v-on:click="selectItem('torre', titem)" 
                        v-bind:class="{selected: (selection != null?(selection.value == titem): false)}">
                        Torre {{titem.idtorre}}
                    </div>
                    <div v-for="pitem in titem.pisos" style="padding-left: 1rem;">
                        <div class="hoverRow" style="padding: 0.2rem 0.5rem;" v-on:click="selectItem('piso', pitem)"
                            v-bind:class="{selected: (selection != null?(selection.value == pitem): false)}">
                            Piso {{pitem.idpiso}}
                        </div>
                        <div v-for="uitem in pitem.unidades" style="padding-left: 1rem;">
                            <div class="hoverRow" style="padding: 0.2rem 0.5rem;" v-on:click="selectItem('unidad', uitem)"
                                v-bind:class="{selected: (selection != null?(selection.value == uitem): false)}">
                                {{uitem.apartamento}}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="pure-u-3-4" style="height: 100%;">
                <div id="container" style="width: 100%; height: 100%;"></div>
            </div>
        </div>
        <div v-if="viewProperties.viewType == 'classic'" class="pure-u-3-4">
            <div class="pure-g">
                <div v-for="item in torres" v-bind:class="['pure-u-1-'+viewProperties.cols]">
                    Torre {{item.idtorre}}
                </div>
            </div>
        </div>
    </div>
    <input type="file" id="fileUpload" style="height:1.2em; width:1.2em; display:none;" accept=".csv" v-on:change="handleChangeFile"/>
</div>