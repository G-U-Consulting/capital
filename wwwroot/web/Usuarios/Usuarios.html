<div class="pure-g">
    <div class="pure-u-1-1 pure-u-md-1-5 lateralMenu">
        <div style="font-size: 0.8rem; border-bottom: 1px solid rgb(231, 231, 231); padding: 0.75rem;">
            Accesos
        </div>
        <div v-on:click="setMainMode(1)" class="lateralMenuItem noSelect" v-bind:class="{'lateralMenuItemSelected': mainmode == 1}">
            <img src="./img/ico/svg/user.svg" />
            Usuarios
        </div>
        <div v-on:click="setMainMode(2)" class="lateralMenuItem noSelect" v-bind:class="{'lateralMenuItemSelected': mainmode == 2}">
            <img src="./img/ico/svg/briefcase.svg" />
            Roles
        </div>
    </div>
    <div class="pure-u-1-1 pure-u-md-4-5">
        <!--USUARIOS-->
        <div v-if="mainmode == 1">
            <div style="font-size: 0.8rem; border-bottom: 1px solid rgb(231, 231, 231); padding: 1rem; ">
                <!--<span style="color: #89888d" class="hoverLink" v-on:click="mainmode = 0">Accesos  /</span>-->
                <span class="hoverLink" v-on:click="mode = 0">Usuarios</span>
                <span v-if="mode == 1">  /  Nuevo Usuario</span>
                <span v-if="mode == 2">  /  Edición de Usuario</span>
                <span v-if="mode == 3">  /  Permisos Temporales</span>
            </div>
            <!--LISTA USUARIOS-->
            <div v-if="mode == 0" style="padding: 1em">
                <h2>Usuarios</h2>
                <div class="searchBox">
                    <div class="pure-g">
                        <div class="pure-u-1-1 pure-u-md-18-24">
                            <input type="text" placeholder="Usuario o Nombre" v-model="seachUser" />
                        </div>
                        <div class="pure-u-1-1 pure-u-md-1-24">
                            <div class="imgGraybutton">
                                <img src="./img/ico/svg/search.svg" />
                            </div>
                        </div>
                        <div class="pure-u-1-1 pure-u-md-5-24">
                            <button v-on:click="startNewUser()" style="width:100%">Nuevo Usuario</button>
                        </div>
                    </div>
                </div>
                <div class="searchBox">
                    <table class="dataTable">
                        <thead>
                            <tr>
                                <th>Usuario</th>
                                <th>Nombres</th>
                                <th>Cargo</th>
                                <th>Identificación</th>
                                <th>Roles Asignados</th>
                                <th>Fecha de Creación</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr v-for="item in users" v-on:click="selectUser(item)">
                                <td>{{item.usuario}}</td>
                                <td>{{item.nombres}}</td>
                                <td>{{item.cargo}}</td>
                                <td>{{item.identificacion}}</td>
                                <td style="text-align: center; width: 10rem;">{{item.cuenta}}</td>
                                <td style="text-align:center; width: 10rem;">{{item.created_on}}</td>
                            </tr>
                        </tbody>
                    </table>
                    <!--<div class="pure-u-2-3" style="margin: auto; font-size: 0.8em">
                        <b>{{item.usuario}}</b> / {{item.nombres}}
                    </div>
                    <div class="pure-u-1-3" style="text-align: right;">
                        <div style="display: inline-block;font-size: 0.7em; padding: 0.5em">
                            {{item.cuenta}}
                            <img src="./img/ico/svg/briefcase.svg" />
                        </div>
                        <div style="display: inline-block;font-size: 0.6em; background-color: rgb(244, 244, 244); border-radius: 0.5em; padding: 0.5em">
                            {{item.created_on}}
                        </div>
                    </div>-->
                </div>
            </div>
            <!--NUEVO USUARIO-->
            <div v-if="mode == 1" style="padding: 1em" class="parentMenuCard">
                <div class="menuCard">
                    <h2>Nuevo Usuario</h2>
                    <br />
                    <div class="pure-g">
                        <div class="pure-u-1-2 formInput">
                            Usuario
                            <input type="text" v-model="newUser.usuario" placeholder="Usuario" />
                        </div>
                        <div class="pure-u-1-2 formInput">
                            Nombres
                            <input type="text" v-model="newUser.nombres" placeholder="Nombres" />
                        </div>
                        <div class="pure-u-1-2 formInput">
                            Identificación
                            <input type="text" v-model="newUser.identificacion" placeholder="Identificación" />
                        </div>
                        <div class="pure-u-1-2 formInput">
                            Email
                            <input type="email" v-model="newUser.email" placeholder="Correo electrónico" />
                        </div>
                        <div class="pure-u-1-2 formInput">
                            <label for="cargo">Cargo</label>
                            <select id="cargo" v-model="newUser.id_cargo">
                                <option value="" disabled selected>Seleccione Cargo</option>
                                <option v-for="item in cargos" :key="item.id_cargo" :value="item.id_cargo">
                                    {{ item.cargo }}
                                </option>
                            </select>
                        </div>
                        <div class="pure-u-1-2 formInput">
                            <label for="cargo">Tipo de Usuarios</label>
                            <select id="cargo" v-model="newUser.id_tipo_usuario">
                                <option value="" disabled selected>Seleccione Cargo</option>
                                <option v-for="item in tiposUsuario" v-bind:value="item.id_tipo_usuario">
                                    {{ item.tipo_usuario }}
                                </option>
                            </select>
                        </div>
                        <div v-if="newUser.cargo === 'otro'" class="pure-u-1-2 formInput">
                            Nuevo Cargo
                            <input type="text" v-model="nuevoCargo" placeholder="Ingrese el nuevo cargo" />
                            <button @click="agregarCargo">Agregar</button>
                        </div>
                    </div>
                    <br />
                    <div>
                        Roles
                        <div class="pure-g">
                            <div class="pure-u-1-4" v-for="item in roleList" style="padding: 1rem">
                                <label><input type="checkbox" v-model="item.selected" />{{item.rol}}</label>
                            </div>
                        </div>
                    </div>
                    <div style="text-align:center">
                        <br /><br /><br />
                        <button v-on:click="insNewUser()">Guardar</button>
                    </div>
                </div>
            </div>
            <!--EDICIÓN DE USUARIO-->
            <div v-if="mode == 2" style="padding: 1em" class="parentMenuCard">
                <div class="menuCard">
                    <div class="pure-g">
                        <div class="pure-u-1-1 pure-u-md-1-2">
                            <h2>Editar Usuario</h2>
                        </div>
                        <div class="pure-u-1-1 pure-u-md-1-2" style="text-align:right">
                            <span style="text-decoration: underline; color: blue; cursor: pointer" v-on:click="startNewException()">Permisos temporales >></span>
                        </div>
                    </div>
                    <br />
                    <div class="pure-g">
                        <div class="pure-u-1-2 formInput">
                            Usuario
                            <input type="text" v-model="editUser.usuario" placeholder="Usuario" />
                        </div>
                        <div class="pure-u-1-2 formInput">
                            Nombres
                            <input type="text" v-model="editUser.nombres" placeholder="Nombres" />
                        </div>
                        <div class="pure-u-1-2 formInput">
                            Identificación
                            <input type="text" v-model="editUser.identificacion" placeholder="Identificación" />
                        </div>
                        <div class="pure-u-1-2 formInput">
                            Email
                            <input type="email" v-model="editUser.email" placeholder="Correo electrónico" />
                        </div>
                    </div>
                    <div class="pure-u-1-2 formInput">
                        <label for="cargo">Cargo</label>
                        <select id="cargo" v-model="editUser.id_cargo">
                            <option value="" disabled selected>Seleccione Cargo</option>
                            <option v-for="item in cargos" :key="item.id_cargo" :value="item.id_cargo">
                                {{ item.cargo }}
                            </option>
                        </select>
                    </div>
                    <div class="pure-u-1-2 formInput">
                        <label for="cargo">Tipo de Usuarios</label>
                        <select id="cargo" v-model="editUser.id_tipo_usuario">
                            <option value="" disabled selected>Seleccione Cargo</option>
                            <option v-for="item in tiposUsuario" v-bind:value="item.id_tipo_usuario">
                                {{ item.tipo_usuario }}
                            </option>
                        </select>
                    </div>
                    <br />
                    <div>
                        Roles
                        <div class="pure-g">
                            <div class="pure-u-1-4" v-for="item in roleList" style="padding: 1rem">
                                <label><input type="checkbox" v-model="item.selected" />{{item.rol}}</label>
                            </div>
                        </div>
                    </div>
                    <div style="text-align:center">
                        <br /><br /><br />
                        <button v-on:click="updateUser()">Actualizar</button>
                    </div>
                </div>
            </div>
            <!--PERMISOS TEMPORALES-->
            <div v-if="mode == 3" style="padding: 1em">
                <h2>Permisos temporales</h2>
                <br />
                <div class="pure-g">
                    <div class="pure-u-1-2 formInput">
                        Desde
                        <input type="date" v-model="fechaDesde" :min="hoy" @input="validarDesde" />
                    </div>
                    <div class="pure-u-1-2 formInput">
                        Hasta
                        <input type="date" v-model="fechaHasta" :min="fechaDesde" @input="validarHasta" />
                    </div>
                </div>
                <div>
                    Accesos
                    <div class="pure-g">
                        <div class="pure-u-1-4" v-for="cat in accessList" style="padding: 1rem">
                            <div style="border: 1px solid #CCCCCC; border-radius: 0.1rem ">
                                <div style="text-align: center; background-color: #EEE; padding: 0.3rem">{{cat.name}}</div>
                                <div v-for="item in cat.list" class="noSelect">
                                    <label><input type="checkbox" v-model="item.selected" />{{item.permiso}}</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div style="text-align:center">
                    <br /><br /><br />
                    <button v-on:click="updateUser()">Agregar</button>
                </div>
            </div>
        </div>
        <!--ROLES-->
        <div v-if="mainmode == 2">
            <div style="font-size: 0.8rem; border-bottom: 1px solid rgb(231, 231, 231); padding: 1rem; ">
                <!--<span style="color: #89888d" class="hoverLink" v-on:click="mainmode = 0">Accesos  /</span>-->
                <span class="hoverLink" v-on:click="mode = 0">Roles</span>
                <span v-if="mode == 1">  /  Nuevo Rol</span>
                <span v-if="mode == 2">  /  Editar Rol</span>
            </div>
            <!--LISTA DE ROLES-->
            <div v-if="mode == 0" style="padding: 1em">
                <h2>Roles</h2>
                <div class="searchBox">
                    <div class="pure-g">
                        <div class="pure-u-1-1 pure-u-md-18-24">
                            <input type="text" placeholder="Rol" />
                        </div>
                        <div class="pure-u-1-1 pure-u-md-1-24">
                            <div class="imgGraybutton">
                                <img src="./img/ico/svg/search.svg" />
                            </div>
                        </div>
                        <div class="pure-u-1-1 pure-u-md-5-24">
                            <button v-on:click="startNewRole()" style="width:100%">Nuevo Rol</button>
                        </div>
                    </div>
                </div>
                <div class="searchBox" >
                    <table class="dataTable">
                        <thead>
                            <tr>
                                <th>Rol</th>
                                <th>Descripción</th>
                                <th>Usuarios</th>
                                <th>Fecha de Creación</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr v-for="item in roles" v-on:click="selectRole(item)">
                                <td style="text-align: center; width: 20rem;">{{item.rol}}</td>
                                <td>{{item.descripcion}}</td>
                                <td style="text-align: center; width: 10rem;">{{item.cuenta}}</td>
                                <td style="text-align:center; width: 10rem;">{{item.created_on}}</td>
                            </tr>
                        </tbody>
                    </table>
                    <!--<div class="pure-u-2-3" style="margin: auto; font-size: 0.8em">
                        <b>{{item.rol}}</b> / {{item.descripcion}}
                    </div>
                    <div class="pure-u-1-3" style="text-align: right;">
                        <div style="display: inline-block;font-size: 0.7em; padding: 0.5em">
                            {{item.cuenta}}
                            <img src="./img/ico/svg/user.svg" />
                        </div>
                        <div style="display: inline-block;font-size: 0.7em; background-color: rgb(244, 244, 244); border-radius: 0.5em; padding: 0.5em">
                            {{item.created_on}}
                        </div>
                    </div>-->
                </div>
            </div>
            <!--NEUVO ROL-->
            <div v-if="mode == 1" style="padding: 1em" class="parentMenuCard">
                <div class="menuCard">
                <h2>Nuevo Rol</h2>
                <br />
                <div class="pure-g">
                    <div class="pure-u-1-1 pure-u-md-3-1" style="margin-top: 1rem">
                        <div>
                            <div class="pure-g">
                                <div class="pure-u-1-1 pure-u-md-11-24" style="padding: 0rem 0.5rem;">
                                    <div style="text-align:center; font-size: 1em">Nombre del rol</div>
                                    <div>
                                        <input type="text" v-model="newRole.rol" maxlength="1000" style="height: 4rem;" />
                                    </div>
                                </div>
                                <div class="pure-u-1-1 pure-u-md-2-24" style="padding: 0rem 0.5rem;">
                                   
                                </div>
                                <div class="pure-u-1-1 pure-u-md-11-24" style="padding: 0rem 0.5rem;">
                                    <div style="text-align:center; font-size: 1em">Descripción</div>
                                    <div>
                                        <textarea v-model="newRole.descripcion" maxlength="1000" style="height: 4rem;"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="pure-u-1-1 pure-u-md-2-1" style="margin-top: 1rem">
                        <div>
                            <div class="pure-g">
                                <div class="pure-u-1-1 pure-u-md-11-24" style="padding: 0rem 0.5rem">
                                    <div style="text-align:center; font-size: 1em">Accesos Disponibles</div>
                                    <div style="padding: 0.5rem; border: 1px solid #898989; border-radius: 0.5rem; height: calc(100vh - 27rem); overflow: auto;">
                                        <div v-for="zone in accessList">
                                            <div>
                                                <div style="cursor: pointer" v-bind:class="{selectedAcces: selectedAccess!= null && selectedAccess.zone == zone}" v-on:click="selectAccess(0, 0, zone)">
                                                    <span v-show="!zone.expanded" v-on:click="zone.expanded = !zone.expanded">&boxplus;</span>
                                                    <span v-show="zone.expanded" v-on:click="zone.expanded = !zone.expanded">&boxminus;</span>
                                                    <span>{{zone.name}}</span>
                                                </div>
                                                <div v-show="zone.expanded" v-for="group in zone.groups">
                                                    <div style="padding-left: 1rem; cursor: pointer" v-bind:class="{selectedAcces: selectedAccess!= null && selectedAccess.group == group}" v-on:click="selectAccess(0, group, zone)">
                                                        <span v-show="!group.expanded" v-on:click="group.expanded = !group.expanded">&boxplus;</span>
                                                        <span v-show="group.expanded" v-on:click="group.expanded = !group.expanded">&boxminus;</span>
                                                        <span>{{group.name}}</span>

                                                    </div>
                                                    <div v-for="item in group.list" class="noSelect" v-show="group.expanded && !item.selected">
                                                        <div style="padding-left: 2rem; cursor: pointer" v-bind:class="{selectedAcces: selectedAccess!= null && selectedAccess.item == item}" v-on:click="selectAccess(item, group, zone)">{{item.permiso}}</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="pure-u-1-1 pure-u-md-2-24">
                                    <div style="text-align: center;">
                                        <br />
                                        <br />
                                        <br />
                                        <br />
                                        <button v-show="selectedAccess != null && !selectedAccess.item.selected" style="width: 2em;min-width: 0;" v-on:click="asignAccess()">&RightArrow;</button>
                                        <button v-show="selectedAccess != null && selectedAccess.item.selected" style="width: 2em;min-width: 0;" v-on:click="asignAccess()">&LeftArrow;</button>
                                    </div>
                                </div>
                                <div class="pure-u-1-1 pure-u-md-11-24" style="padding: 0rem 0.5rem">
                                    <div style="text-align:center; font-size: 1em">Accesos Asignados</div>
                                    <div style="padding: 0.5rem; border: 1px solid #898989; border-radius: 0.5rem; height: calc(100vh - 27rem); overflow: auto;">
                                        <div v-for="zone in accessList" v-show="zone.selectedItems > 0">
                                            <div>
                                                <div style="cursor: pointer" v-bind:class="{selectedAcces: selectedAccess!= null && selectedAccess.zone == zone}" v-on:click="selectAccess(0, 0, zone)">
                                                    <span v-show="!zone.expanded" v-on:click="zone.expanded = !zone.expanded">&boxplus;</span>
                                                    <span v-show="zone.expanded" v-on:click="zone.expanded = !zone.expanded">&boxminus;</span>
                                                    <span>{{zone.name}}</span>
                                                </div>
                                                <div v-show="zone.expanded && group.selectedItems > 0" v-for="group in zone.groups">
                                                    <div style="padding-left: 1rem; cursor: pointer" v-bind:class="{selectedAcces: selectedAccess!= null && selectedAccess.group == group}" v-on:click="selectAccess(0, group, zone)">
                                                        <span v-show="!group.expanded" v-on:click="group.expanded = !group.expanded">&boxplus;</span>
                                                        <span v-show="group.expanded" v-on:click="group.expanded = !group.expanded">&boxminus;</span>
                                                        <span>{{group.name}}</span>
                                                    </div>
                                                    <div v-for="item in group.list" class="noSelect" v-show="group.expanded && item.selected">
                                                        <div style="padding-left: 2rem; cursor: pointer" v-bind:class="{selectedAcces: selectedAccess!= null && selectedAccess.item == item}" v-on:click="selectAccess(item, group, zone)">{{item.permiso}}</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div style="text-align:right;" class="pure-u-1-1 pure-u-md-1-1">
                        <div>
                            <div class="pure-g">
                                <div class="pure-u-1-1 pure-u-md-24-24" style="padding: 1rem 0.5rem 0 0">
                                    <button v-on:click="insNewRole()">Guardar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                </div>
            </div>
            <!--EDITAR ROL-->
            <div v-if="mode == 2" style="padding: 1em" class="parentMenuCard">
                <div class="menuCard">
                <h2>Edición de Rol</h2>
                <br />
                <div class="pure-g">
                    <div class="pure-u-1-1 pure-u-md-1-3">
                        <div class="formInput">
                            Nombre del rol
                            <input type="text" v-model="editRole.rol" placeholder="Nombre" maxlength="1000" />
                        </div>
                        <div class="formInput">
                            Descripción
                            <textarea v-model="editRole.descripcion" placeholder="Descripción" maxlength="1000" style="height: 4rem;"></textarea>
                        </div>
                        <div style="text-align:center">
                            <br /><br /><br />
                            <button v-on:click="updateRole()">Actualizar</button>
                        </div>
                    </div>
                    <br />
                    <div class="pure-u-1-1 pure-u-md-2-3">
                        <div>
                            <div class="pure-g">
                                <div class="pure-u-1-1 pure-u-md-11-24" style="padding: 0rem 0.5rem">
                                    <div style="text-align:center; font-size: 1em">Accesos Disponibles</div>
                                    <div style="padding: 0.5rem; border: 1px solid #898989; border-radius: 0.5rem; height: calc(100vh - 16rem); overflow: auto;">
                                        <div v-for="zone in accessList">
                                            <div>
                                                <div v-on:click="zone.expanded = !zone.expanded" class="noSelect" style="cursor: pointer">
                                                    <span v-show="!zone.expanded">&boxplus;</span>
                                                    <span v-show="zone.expanded">&boxminus;</span>
                                                    <span>{{zone.name}}</span>
                                                </div>
                                                <div v-show="zone.expanded" v-for="group in zone.groups">
                                                    <div style="padding-left: 1rem; cursor: pointer" v-on:click="group.expanded = !group.expanded" class="noSelect">
                                                        <span v-show="!group.expanded">&boxplus;</span>
                                                        <span v-show="group.expanded">&boxminus;</span>
                                                        <span>{{group.name}}</span>
                                                    </div>
                                                    <div v-for="item in group.list" class="noSelect" v-show="group.expanded && !item.selected">
                                                        <div style="padding-left: 2rem; cursor: pointer" v-bind:class="{selectedAcces: selectedAccess!= null && selectedAccess.item == item}" v-on:click="selectAccess(item, group, zone)">{{item.permiso}}</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="pure-u-1-1 pure-u-md-2-24">
                                    <div style="text-align: center;">
                                        <br />
                                        <br />
                                        <br />
                                        <br />
                                        <button v-show="selectedAccess != null && !selectedAccess.item.selected" style="width: 2em;min-width: 0;" v-on:click="asignAccess()">&RightArrow;</button>
                                        <button v-show="selectedAccess != null && selectedAccess.item.selected" style="width: 2em;min-width: 0;" v-on:click="asignAccess()">&LeftArrow;</button>
                                    </div>
                                </div>
                                <div class="pure-u-1-1 pure-u-md-11-24" style="padding: 0rem 0.5rem">
                                    <div style="text-align:center; font-size: 1em">Accesos Asignados</div>
                                    <div style="padding: 0.5rem; border: 1px solid #898989; border-radius: 0.5rem; height: calc(100vh - 16rem); overflow: auto;">
                                        <div v-for="zone in accessList" v-show="zone.selectedItems > 0">
                                            <div>
                                                <div v-on:click="zone.expanded = !zone.expanded" class="noSelect" style="cursor: pointer">
                                                    <span v-show="!zone.expanded">&boxplus;</span>
                                                    <span v-show="zone.expanded">&boxminus;</span>
                                                    <span>{{zone.name}}</span>
                                                </div>
                                                <div v-show="zone.expanded && group.selectedItems > 0" v-for="group in zone.groups">
                                                    <div style="padding-left: 1rem; cursor: pointer" v-on:click="group.expanded = !group.expanded" class="noSelect">
                                                        <span v-show="!group.expanded">&boxplus;</span>
                                                        <span v-show="group.expanded">&boxminus;</span>
                                                        <span>{{group.name}}</span>
                                                    </div>
                                                    <div v-for="item in group.list" class="noSelect" v-show="group.expanded && item.selected">
                                                        <div style="padding-left: 2rem; cursor: pointer" v-bind:class="{selectedAcces: selectedAccess!= null && selectedAccess.item == item}" v-on:click="selectAccess(item, group, zone)">{{item.permiso}}</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    </div>
                </div>
                <!--<div>
                    Usuarios
                    <div class="pure-g">
                        <div class="pure-u-1-4" v-for="item in users" style="padding: 1rem" v-on:click="selectUserInRole(item)">
                            <label class="hoverLink">{{item.usuario}}</label>
                        </div>
                    </div>
                </div>-->
            </div>
        </div>
    </div>
</div>